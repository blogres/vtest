import{_ as K}from"./app-JabzxadU.js";import{i as N,a as bt,b as rt,l as p,f as he,g as w,E as hi,D as O,h as U,S as nt,j as oi,t as Z,V as W,k as v,o as x,p as d,m as li,n as ci,e as l,C as g,c as lt,q as Q,r as Ei,v as P,I as ys,s as T,w as ut,x as Ai,y as Ci,z,A as y,B as L,u as k,F as q,G as oe,J as ui,K as tt,L as qt,M as Oi,N as st,O as J,P as Jt,Q as Xt,R as Li,T as le,U as di,W as dt,X as $s,Y as te,Z as we,_ as qi,$ as Mi,a0 as ji,a1 as Di,a2 as Ii,a3 as Ri,a4 as _i,a5 as Fi,a6 as Ni,a7 as Vi,a8 as Hi,a9 as Ki,aa as Ui,ab as zi,ac as Qi,ad as Wi,ae as Ji,af as Xi}from"./vidstack-iVChOPoI-jn5iU3Z9.js";const Bi=Symbol(0),Yi=Symbol(0),Gi=Symbol(0),Zi=Symbol(0),ta=Symbol(0),ea=Symbol(0),sa=Symbol(0),ia=Symbol(0),aa=Symbol(0),E={oa:Bi,Yb:Yi,H:Gi,pa:Zi,Zb:ta,Mc:ea,ne:sa,oe:ia,pe:aa};class ee{get length(){return this.$.length}constructor(t,e){N(t)?this.$=t:!bt(t)&&!bt(e)?this.$=[[t,e]]:this.$=[]}start(t){return this.$[t][0]??1/0}end(t){return this.$[t][1]??1/0}}function vs(n){if(!n.length)return null;let t=n.start(0);for(let e=1;e<n.length;e++){const s=n.start(e);s<t&&(t=s)}return t}function Ts(n){if(!n.length)return null;let t=n.end(0);for(let e=1;e<n.length;e++){const s=n.end(e);s>t&&(t=s)}return t}function Br(n,t){const e=new URLSearchParams;for(const s of Object.keys(t))e.set(s,t[s]+"");return n+"?"+e.toString()}function Pt(n,t="preconnect"){const e=document.querySelector(`link[href="${n}"]`);if(!rt(e))return!0;const s=document.createElement("link");return s.rel=t,s.href=n,s.crossOrigin="true",document.head.append(s),!0}const Et={};function Yr(n){if(Et[n])return Et[n].promise;const t=he(),e=document.querySelector(`script[src="${n}"]`);if(!rt(e))return t.resolve(),t.promise;const s=document.createElement("script");return s.src=n,s.onload=()=>{t.resolve(),delete Et[n]},s.onerror=()=>{t.reject(),delete Et[n]},setTimeout(()=>document.head.append(s),0),t.promise}function Mt(n){return n==="use-credentials"?"include":w(n)?"same-origin":void 0}const ra=Symbol(0),na=Symbol(0),ha=Symbol(0),oa=Symbol(0),la=Symbol(0),ca=Symbol(0),ua=Symbol(0),$={al:ra,M:na,Ta:ha,P:oa,Ua:la,T:ca,te:ua};function ce(n,t){return t>=n.startTime&&t<n.endTime}function Bt(n,t,e){let s=null;function i(){const a=w(t)?[t]:t,r=n.toArray().find(h=>a.includes(h.kind)&&h.mode==="showing");if(r!==s){if(!r){e(null),s=null;return}r.readyState==2?e(r):(e(null),r.addEventListener("load",()=>e(r),{once:!0})),s=r}}return i(),p(n,"mode-change",i)}function Gr(n,t,e){Bt(n,t,s=>{if(!s){e("");return}const i=()=>{const a=s==null?void 0:s.activeCues[0];e((a==null?void 0:a.text)||"")};i(),p(s,"cue-change",i)})}var ks,ws,Ps;class ue extends hi{constructor(t){super(),this.id="",this.label="",this.language="",this.default=!1,this.P=!1,this.Va=0,this.I="disabled",this.ue={},this.ac=[],this.J=[],this.Wa=[],this[ks]=0,this[ws]=null,this[Ps]=null;for(const e of Object.keys(t))this[e]=t[e];this.type||(this.type="vtt"),t.content?K(()=>import("./prod-JgeY5li1.js").then(e=>e.d),__vite__mapDeps([0,1])).then(({parseText:e,VTTCue:s,VTTRegion:i})=>{!w(t.content)||t.type==="json"?(this.ve(t.content,s,i),this.readyState!==3&&this.M()):e(t.content,{type:t.type}).then(({cues:a,regions:r})=>{this.J=a,this.ac=r,this.M()})}):t.src||(this[$.M]=2)}static createId(t){return`id::${t.type}-${t.kind}-${t.src??t.label}`}get metadata(){return this.ue}get regions(){return this.ac}get cues(){return this.J}get activeCues(){return this.Wa}get readyState(){return this[$.M]}get mode(){return this.I}set mode(t){this.setMode(t)}addCue(t,e){var a;let s=0,i=this.J.length;for(s=0;s<i&&!(t.endTime<=this.J[s].startTime);s++);s===i?this.J.push(t):this.J.splice(s,0,t),(e==null?void 0:e.type)!=="cuechange"&&((a=this[$.T])==null||a.track.addCue(t)),this.dispatchEvent(new O("add-cue",{detail:t,trigger:e})),ce(t,this.Va)&&this[$.Ta](this.Va,e)}removeCue(t,e){var i;const s=this.J.indexOf(t);if(s>=0){const a=this.Wa.includes(t);this.J.splice(s,1),(i=this[$.T])==null||i.track.removeCue(t),this.dispatchEvent(new O("remove-cue",{detail:t,trigger:e})),a&&this[$.Ta](this.Va,e)}}setMode(t,e){var s;this.I!==t&&(this.I=t,t==="disabled"?(this.Wa=[],this.we()):this.readyState===2?this[$.Ta](this.Va,e):this.xe(),this.dispatchEvent(new O("mode-change",{detail:this,trigger:e})),(s=this[$.Ua])==null||s.call(this))}[(ks=$.M,ws=$.Ua,Ps=$.T,$.Ta)](t,e){if(this.Va=t,this.mode==="disabled"||!this.J.length)return;const s=[];for(let a=0,r=this.J.length;a<r;a++){const h=this.J[a];ce(h,t)&&s.push(h)}let i=s.length!==this.Wa.length;if(!i){for(let a=0;a<s.length;a++)if(!this.Wa.includes(s[a])){i=!0;break}}this.Wa=s,i&&this.we(e)}[$.P](){this.P=!0,this.I!=="disabled"&&this.xe()}async xe(){var t,e;if(!(!this.P||!this.src||this[$.M]>0)){this[$.M]=1,this.dispatchEvent(new O("load-start"));try{const{parseResponse:s,VTTCue:i,VTTRegion:a}=await K(()=>import("./prod-JgeY5li1.js").then(o=>o.d),__vite__mapDeps([0,1])),r=(t=this[$.al])==null?void 0:t.call(this),h=fetch(this.src,{headers:this.type==="json"?{"Content-Type":"application/json"}:void 0,credentials:Mt(r)});if(this.type==="json")this.ve(await(await h).text(),i,a);else{const{errors:o,metadata:c,regions:u,cues:f}=await s(h,{type:this.type,encoding:this.encoding});if(((e=o[0])==null?void 0:e.code)===0)throw o[0];this.ue=c,this.ac=u,this.J=f}this.M()}catch(s){this.ye(s)}}}M(){var e;if(this[$.M]=2,!this.src||this.type!=="vtt"){const s=(e=this[$.T])==null?void 0:e.track;if(s)for(const i of this.J)s.addCue(i)}const t=new O("load");this[$.Ta](this.Va,t),this.dispatchEvent(t)}ye(t){this[$.M]=3,this.dispatchEvent(new O("error",{detail:t}))}ve(t,e,s){try{const{regions:i,cues:a}=pa(t,e,s);this.ac=i,this.J=a}catch(i){this.ye(i)}}we(t){this.dispatchEvent(new O("cue-change",{trigger:t}))}}const da=/captions|subtitles/;function D(n){return da.test(n.kind)}function pa(n,t,e){const s=w(n)?JSON.parse(n):n;let i=[],a=[];return s.regions&&e&&(i=s.regions.map(r=>Object.assign(new e,r))),(s.cues||N(s))&&(a=(N(s)?s:s.cues).filter(r=>U(r.startTime)&&U(r.endTime)).map(r=>Object.assign(new t(0,0,""),r))),{regions:i,cues:a}}var xs;class pi extends hi{constructor(){super(...arguments),this.r=[],this[xs]=!1}get length(){return this.r.length}get readonly(){return this[E.Zb]}toArray(){return[...this.r]}[(xs=E.Zb,Symbol.iterator)](){return this.r.values()}[E.oa](t,e){const s=this.r.length;""+s in this||Object.defineProperty(this,s,{get(){return this.r[s]}}),!this.r.includes(t)&&(this.r.push(t),this.dispatchEvent(new O("add",{detail:t,trigger:e})))}[E.Yb](t,e){var i;const s=this.r.indexOf(t);s>=0&&((i=this[E.oe])==null||i.call(this,t,e),this.r.splice(s,1),this.dispatchEvent(new O("remove",{detail:t,trigger:e})))}[E.H](t){var e;for(const s of[...this.r])this[E.Yb](s,t);this.r=[],this[E.Mc](!1,t),(e=this[E.ne])==null||e.call(this)}[E.Mc](t,e){this[E.Zb]!==t&&(this[E.Zb]=t,this.dispatchEvent(new O("readonly-change",{detail:t,trigger:e})))}}const fi=new nt({artist:"",audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,buffered:new ee,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:oi(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,controlsVisible:!1,crossOrigin:null,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new ee,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,seekable:new ee,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(D).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const n=vs(this.buffered)??0;return Math.max(0,n-this.clipStartTime)},get bufferedEnd(){const n=Ts(this.buffered)??0;return Math.min(this.duration,Math.max(0,n-this.clipStartTime))},get seekableStart(){const n=vs(this.seekable)??0;return Math.max(0,n-this.clipStartTime)},get seekableEnd(){const n=this.canPlay?Ts(this.seekable)??1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,Math.max(0,n-this.clipStartTime)):n},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),fa=new Set(["audioTrack","audioTracks","autoPlayError","autoPlaying","autoQuality","buffered","canPlay","ended","error","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","paused","played","playing","qualities","quality","realCurrentTime","seekable","seeking","started","userBehindLiveEdge","waiting"]);function ma(n){fi.reset(n,t=>fa.has(t)),Z()}const ba=Symbol(0),ga=Symbol(0),ot={Ya:ba,Za:ga};function se(n){return n instanceof Error?n:Error(JSON.stringify(n))}function B(n,t){if(!n)throw Error(t||"Assertion failed.")}function I(n,t=2){return Number(n.toFixed(t))}function ya(n){var t;return((t=String(n).split(".")[1])==null?void 0:t.length)??0}function Pe(n,t,e){return Math.max(n,Math.min(e,t))}var F={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Ss=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Es=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],As=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],R=typeof window<"u"&&typeof window.document<"u"?window.document:{},H="fullscreenEnabled"in R&&Object.keys(F)||Ss[0]in R&&Ss||Es[0]in R&&Es||As[0]in R&&As||[],it={requestFullscreen:function(n){return n[H[F.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[H[F.requestFullscreen]]},get exitFullscreen(){return R[H[F.exitFullscreen]].bind(R)},get fullscreenPseudoClass(){return":"+H[F.fullscreen]},addEventListener:function(n,t,e){return R.addEventListener(H[F[n]],t,e)},removeEventListener:function(n,t,e){return R.removeEventListener(H[F[n]],t,e)},get fullscreenEnabled(){return!!R[H[F.fullscreenEnabled]]},set fullscreenEnabled(n){},get fullscreenElement(){return R[H[F.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return R[("on"+H[F.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return R[("on"+H[F.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return R[("on"+H[F.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return R[("on"+H[F.fullscreenerror]).toLowerCase()]=n}};const jt=it.fullscreenEnabled;class $a extends W{constructor(){super(...arguments),this.ub=!1,this.Nc=!1}get active(){return this.Nc}get supported(){return jt}onConnect(){p(it,"fullscreenchange",this.Oc.bind(this)),p(it,"fullscreenerror",this._b.bind(this)),x(this.ya.bind(this))}async ya(){jt&&await this.exit()}Oc(t){const e=ie(this.el);e!==this.Nc&&(e||(this.ub=!1),this.Nc=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}_b(t){this.ub&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.ub=!1)}async enter(){try{return this.ub=!0,!this.el||ie(this.el)?void 0:(Cs(),it.requestFullscreen(this.el))}catch(t){throw this.ub=!1,t}}async exit(){if(!(!this.el||!ie(this.el)))return Cs(),it.exitFullscreen()}}function va(){return jt}function ie(n){if(it.fullscreenElement===n)return!0;try{return n.matches(it.fullscreenPseudoClass)}catch{return!1}}function Cs(){if(!jt)throw Error("[vidstack] no fullscreen API")}const _t=class _t extends W{constructor(){super(...arguments),this.vb=v(this.qe()),this.Ra=v(!1)}get type(){return this.vb()}get locked(){return this.Ra()}get portrait(){return this.vb().startsWith("portrait")}get landscape(){return this.vb().startsWith("landscape")}get supported(){return _t.supported}onConnect(){if(this.supported)p(screen.orientation,"change",this.re.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.re.bind(this),x(()=>t.onchange=null)}x(this.ya.bind(this))}async ya(){this.supported&&this.Ra()&&await this.unlock()}re(t){this.vb.set(this.qe()),this.dispatch("orientation-change",{detail:{orientation:d(this.vb),lock:this.$b},trigger:t})}async lock(t){d(this.Ra)||this.$b===t||(this.se(),await screen.orientation.lock(t),this.Ra.set(!0),this.$b=t)}async unlock(){d(this.Ra)&&(this.se(),this.$b=void 0,await screen.orientation.unlock(),this.Ra.set(!1))}se(){if(!this.supported)throw Error("[vidstack] no orientation API")}qe(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};_t.supported=oi();let Dt=_t;class Ta{constructor(t=void 0){this.tb=t,this.A=null,this.aa=null,this.Pc=-1}setTarget(t){this.A=t}getPlayer(t){var e;return this.aa?this.aa:((e=t??this.A)==null||e.dispatchEvent(new O("find-media-player",{detail:s=>void(this.aa=s),bubbles:!0,composed:!0})),this.aa)}setPlayer(t){this.aa=t}startLoading(t){this.s("media-start-loading",t)}startLoadingPoster(t){this.s("media-poster-start-loading",t)}requestAirPlay(t){this.s("media-airplay-request",t)}requestGoogleCast(t){this.s("media-google-cast-request",t)}play(t){this.s("media-play-request",t)}pause(t){this.s("media-pause-request",t)}mute(t){this.s("media-mute-request",t)}unmute(t){this.s("media-unmute-request",t)}enterFullscreen(t,e){this.s("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.s("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.s("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.s("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.s("media-enter-pip-request",t)}exitPictureInPicture(t){this.s("media-exit-pip-request",t)}seeking(t,e){this.s("media-seeking-request",e,t)}seek(t,e){this.s("media-seek-request",e,t)}seekToLiveEdge(t){this.s("media-live-edge-request",t)}changeVolume(t,e){this.s("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.s("media-audio-track-change-request",e,t)}changeQuality(t,e){this.s("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.s("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.s("media-rate-change-request",e,t)}resumeControls(t){this.s("media-resume-controls-request",t)}pauseControls(t){this.s("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e==null?void 0:e.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}disableCaptions(t){const e=this.getPlayer(t==null?void 0:t.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const a=s.indexOf(i);this.changeTextTrackMode(a,"disabled",t)}}toggleCaptions(t){const e=this.getPlayer(t==null?void 0:t.target);if(!e)return;const s=e.state.textTracks,i=e.state.textTrack;if(i){const a=s.indexOf(i);this.changeTextTrackMode(a,"disabled",t),this.Pc=a}else{let a=this.Pc;(!s[a]||!D(s[a]))&&(a=-1),a===-1&&(a=s.findIndex(r=>D(r)&&r.default)),a===-1&&(a=s.findIndex(r=>D(r))),a>=0&&this.changeTextTrackMode(a,"showing",t),this.Pc=-1}}s(t,e,s){var h,o;const i=new O(t,{bubbles:!0,composed:!0,cancelable:!0,detail:s,trigger:e});let a=(e==null?void 0:e.target)||null;a&&a instanceof g&&(a=a.el),a=!a||a===document||a===window||a===document.body||((h=this.aa)==null?void 0:h.el)&&a instanceof Node&&!this.aa.el.contains(a)?this.A??((o=this.getPlayer())==null?void 0:o.el):a??this.A,this.aa?t==="media-play-request"&&!this.aa.state.canLoad?a==null||a.dispatchEvent(i):this.aa.canPlayQueue.k(t,()=>a==null?void 0:a.dispatchEvent(i)):a==null||a.dispatchEvent(i)}za(t){}}class ht extends W{}class ka extends ht{constructor(){super(...arguments),this.Qc=-2,this.Xa=!1,this.ze=v(!1),this.Rc=v(!1),this.wb=null,this.defaultDelay=2e3}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.ze()||t()}set hideOnMouseLeave(t){this.ze.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.Sc(),this.Xa||this.bc(!0,t,e)}hide(t=this.defaultDelay,e){this.Sc(),this.Xa||this.bc(!1,t,e)}pause(t){this.Xa=!0,this.Sc(),this.bc(!0,0,t)}resume(t){this.Xa=!1,!this.$state.paused()&&this.bc(!1,this.defaultDelay,t)}onConnect(){l(this.bg.bind(this)),l(this.Tc.bind(this));const t=this.xb.bind(this),e=this.Aa.bind(this);this.listen("can-play",s=>this.show(0,s)),this.listen("play",t),this.listen("pause",e),this.listen("auto-play-fail",e)}bg(){const{started:t,pointer:e,paused:s}=this.$state;if(!t()||e()!=="fine")return;const i=this.hideOnMouseLeave;(!i||!this.Rc())&&l(()=>{s()||this.listen("pointermove",this.Ae.bind(this))}),i&&(this.listen("mouseenter",this.cg.bind(this)),this.listen("mouseleave",this.dg.bind(this)))}Tc(){const{paused:t,started:e,autoPlayError:s}=this.$state;if(t()||s()&&!e())return;const i=this.Ae.bind(this);l(()=>{const a=this.$state.pointer(),r=a==="coarse",h=[r?"touchend":"pointerup","keydown"];for(const o of h)this.listen(o,i,{passive:!1})})}xb(t){this.show(0,t),this.hide(void 0,t)}Aa(t){this.show(0,t)}cg(t){this.Rc.set(!1),this.show(0,t),this.hide(void 0,t)}dg(t){this.Rc.set(!0),this.hide(0,t)}Sc(){window.clearTimeout(this.Qc),this.Qc=-1}Ae(t){var e;t.MEDIA_GESTURE||this.Xa||we(t)||(le(t)&&(t.key==="Escape"?((e=this.el)==null||e.focus(),this.wb=null):this.wb&&(t.preventDefault(),requestAnimationFrame(()=>{var s;(s=this.wb)==null||s.focus(),this.wb=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}bc(t,e,s){if(e===0){this.B(t,s);return}this.Qc=window.setTimeout(()=>{this.scope&&this.B(t&&!this.Xa,s)},e)}B(t,e){var s;this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&((s=this.el)!=null&&s.contains(document.activeElement))&&(this.wb=document.activeElement,requestAnimationFrame(()=>{var i;return(i=this.el)==null?void 0:i.focus()})),this.dispatch("controls-change",{detail:t,trigger:e}))}}var xt=wa;function wa(n,t,e){var s=null,i=null,a=e&&e.leading,r=e&&e.trailing;a==null&&(a=!0),r==null&&(r=!a),a==!0&&(r=!1);var h=function(){s&&(clearTimeout(s),s=null)},o=function(){var u=i;h(),u&&u()},c=function(){var u=a&&!s,f=this,m=arguments;if(i=function(){return n.apply(f,m)},s||(s=setTimeout(function(){if(s=null,r)return i()},t)),u)return u=!1,i()};return c.cancel=h,c.flush=o,c}class Pa{constructor(){this.playerId="vds-player",this.mediaId=null,this.Qk={volume:null,muted:null,time:null,lang:null,captions:null,rate:null},this.saveTime=xt(()=>{if(!this.mediaId)return;const t=(this.Qk.time??0).toString();localStorage.setItem(this.mediaId,t)},1e3)}async getVolume(){return this.Qk.volume}async setVolume(t){this.Qk.volume=t,this.save()}async getMuted(){return this.Qk.muted}async setMuted(t){this.Qk.muted=t,this.save()}async getTime(){return this.Qk.time}async setTime(t){this.Qk.time=t,this.saveTime()}async getLang(){return this.Qk.lang}async setLang(t){this.Qk.lang=t,this.save()}async getCaptions(){return this.Qk.captions}async setCaptions(t){this.Qk.captions=t,this.save()}async getPlaybackRate(){return this.Qk.rate}async setPlaybackRate(t){this.Qk.rate=t,this.save()}onChange(t,e,s="vds-player"){const i=s?localStorage.getItem(s):null,a=e?localStorage.getItem(e):null;this.playerId=s,this.mediaId=e,this.Qk={volume:null,muted:null,lang:null,captions:null,...i?JSON.parse(i):{},time:a?+a:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.Qk,time:void 0});localStorage.setItem(this.playerId,t)}}class xa{constructor(){this.priority=0,this.Be=!0,this.m=null,this.z=null,this.yb=new Set}canRender(t,e){return!!e}attach(t){this.m=t,t&&(t.textTracks.onchange=this.B.bind(this))}addTrack(t){this.yb.add(t),this.eg(t)}removeTrack(t){var e,s;(s=(e=t[$.T])==null?void 0:e.remove)==null||s.call(e),t[$.T]=null,this.yb.delete(t)}changeTrack(t){const e=t==null?void 0:t[$.T];e&&e.track.mode!=="showing"&&(e.track.mode="showing"),this.z=t}setDisplay(t){this.Be=t,this.B()}detach(){this.m&&(this.m.textTracks.onchange=null);for(const t of this.yb)this.removeTrack(t);this.yb.clear(),this.m=null,this.z=null}eg(t){var s;if(!this.m)return;const e=t[s=$.T]??(t[s]=this.fg(t));e instanceof HTMLElement&&(this.m.append(e),e.track.mode=e.default?"showing":"hidden")}fg(t){const e=document.createElement("track"),s=t.default||t.mode==="showing",i=t.src&&t.type==="vtt";return e.id=t.id,e.src=i?t.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!i&&this.Ce(t,e.track),e}Ce(t,e){var s;if(!(t.src&&t.type==="vtt"||(s=e.cues)!=null&&s.length))for(const i of t.cues)e.addCue(i)}B(t){var e;for(const s of this.yb){const i=(e=s[$.T])==null?void 0:e.track;if(!i)continue;if(!this.Be){i.mode="disabled";continue}const a=i.mode==="showing";a&&this.Ce(s,i),s.setMode(a?"showing":"disabled",t)}}}class Sa{constructor(t){this.a=t,this.m=null,this.cc=[],this.De=!1,this.ba=null,this.Ba=null;const e=t.textTracks;this.Uc=e,l(this.Vc.bind(this)),x(this.Ee.bind(this)),p(e,"add",this.Wc.bind(this)),p(e,"remove",this.gg.bind(this)),p(e,"mode-change",this.ea.bind(this))}Vc(){const{$state:t,$iosControls:e}=this.a;this.De=t.controls()||e(),this.ea()}add(t){this.cc.push(t),this.ea()}remove(t){t.detach(),this.cc.splice(this.cc.indexOf(t),1),this.ea()}Fe(t){requestAnimationFrame(()=>{if(this.m=t,t){this.ba=new xa,this.ba.attach(t);for(const e of this.Uc)this.Ge(e)}this.ea()})}Ge(t){var e;D(t)&&((e=this.ba)==null||e.addTrack(t))}hg(t){var e;D(t)&&((e=this.ba)==null||e.removeTrack(t))}Wc(t){this.Ge(t.detail)}gg(t){this.hg(t.detail)}ea(){var s,i,a,r,h,o,c;const t=this.Uc.selected;if(this.m&&(this.De||t!=null&&t[$.te])){(s=this.Ba)==null||s.changeTrack(null),(i=this.ba)==null||i.setDisplay(!0),(a=this.ba)==null||a.changeTrack(t);return}if((r=this.ba)==null||r.setDisplay(!1),(h=this.ba)==null||h.changeTrack(null),!t){(o=this.Ba)==null||o.changeTrack(null);return}const e=this.cc.sort((u,f)=>u.priority-f.priority).find(u=>u.canRender(t,this.m));this.Ba!==e&&((c=this.Ba)==null||c.detach(),e==null||e.attach(this.m),this.Ba=e??null),e==null||e.changeTrack(t)}Ee(){var t,e;(t=this.ba)==null||t.detach(),this.ba=null,(e=this.Ba)==null||e.detach(),this.Ba=null}}var xe=Ea;function Ea(n,t,e){var s=null,i=null,a=function(){s&&(clearTimeout(s),i=null,s=null)},r=function(){var o=i;a(),o&&o()},h=function(){if(!t)return n.apply(this,arguments);var o=this,c=arguments,u=e&&!s;if(a(),i=function(){n.apply(o,c)},s=setTimeout(function(){if(s=null,!u){var f=i;return i=null,f()}},t),u)return i()};return h.cancel=a,h.flush=r,h}class Aa extends pi{constructor(){super(),this.P=!1,this.dc={},this.Sk=null,this.Rk=null,this.Wk=xe(async()=>{var s,i,a;if(!this.P||this.selected||await((s=this.Sk)==null?void 0:s.getCaptions())===!1)return;!this.Rk&&this.Sk&&(this.Rk=await this.Sk.getLang());const t=this.Rk&&this.r.find(r=>D(r)&&r.language===this.Rk),e=this.dc.captions;t?t.mode="showing":e&&e&&(e.mode="showing"),(a=(i=this.Sk)==null?void 0:i.setLang)==null||a.call(i,this.Rk??(e==null?void 0:e.language)??null)},300),this.Je=this.ig.bind(this)}get selected(){return this.r.find(e=>e.mode==="showing"&&D(e))??null}get preferredLang(){return this.Rk}set preferredLang(t){this.Rk=t}add(t,e){const s=t instanceof ue,i=s?t:new ue(t),a=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return this.dc[a]&&t.default&&delete t.default,i.addEventListener("mode-change",this.Je),this[E.oa](i,e),i[$.al]=this[$.al],this.P&&i[$.P](),t.default&&(this.dc[a]=i,a!=="captions"?i.mode="showing":this.Wk()),this}remove(t,e){if(this.r.includes(t))return t===this.dc[t.kind]&&delete this.dc[t.kind],t.mode="disabled",t[$.Ua]=null,t.removeEventListener("mode-change",this.Je),this[E.Yb](t,e),this}clear(t){for(const e of[...this.r])this.remove(e,t);return this}getById(t){return this.r.find(e=>e.id===t)??null}getByKind(t){const e=Array.isArray(t)?t:[t];return this.r.filter(s=>e.includes(s.kind))}[$.P](){if(!this.P){for(const t of this.r)t[$.P]();this.P=!0,this.Wk()}}ig(t){var s,i,a,r;const e=t.detail;if(this.Sk&&D(e)&&((i=(s=this.Sk).setCaptions)==null||i.call(s,e.mode==="showing"),(r=(a=this.Sk)==null?void 0:a.setLang)==null||r.call(a,this.Rk??(e==null?void 0:e.language)??null)),e.mode==="showing"){const h=D(e)?["captions","subtitles"]:[e.kind];for(const o of this.r)o.mode==="showing"&&o!=e&&h.includes(o.kind)&&(o.mode="disabled")}this.dispatchEvent(new O("mode-change",{detail:t.detail,trigger:t}))}setStorage(t){this.Sk=t}}const ft=Symbol(0);class mi extends pi{get selected(){return this.r.find(t=>t.selected)??null}get selectedIndex(){return this.r.findIndex(t=>t.selected)}[E.oe](t,e){this[E.pa](t,!1,e)}[E.oa](t,e){t[ft]=!1,Object.defineProperty(t,"selected",{get(){return this[ft]},set:s=>{var i;this.readonly||((i=this[E.pe])==null||i.call(this),this[E.pa](t,s))}}),super[E.oa](t,e)}[E.pa](t,e,s){if(e===(t==null?void 0:t[ft]))return;const i=this.selected;t&&(t[ft]=e),(e?i!==t:i===t)&&(i&&(i[ft]=!1),this.dispatchEvent(new O("change",{detail:{prev:i,current:this.selected},trigger:s})))}}class Ca extends mi{getById(t){return t===""?null:this.r.find(e=>e.id===t)??null}}class Oa extends mi{constructor(){super(...arguments),this.fc=!1,this.switch="current"}get auto(){return this.fc||this.readonly}[E.pe](){this[ot.Ya](!1)}[E.ne](t){this[ot.Ya](!1,t)}autoSelect(t){var e;this.readonly||this.fc||!this[ot.Za]||((e=this[ot.Za])==null||e.call(this),this[ot.Ya](!0,t))}[ot.Ya](t,e){this.fc!==t&&(this.fc=t,this.dispatchEvent(new O("auto-change",{detail:t,trigger:e})))}}function La(n){return n instanceof HTMLAudioElement}function qa(n){return n instanceof HTMLVideoElement}function Ma(n){return La(n)||qa(n)}const ja={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Os=new Set(["Shift","Alt","Meta","Control"]),Da='button, [role="button"]',Ls='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class Ia extends ht{constructor(t){super(),this.a=t,this._a=null}onConnect(){l(this.mg.bind(this))}mg(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s=e()==="player"?this.el:document,i=v(!1);s===this.el?(this.listen("focusin",()=>i.set(!0)),this.listen("focusout",a=>{this.el.contains(a.target)||i.set(!1)})):(d(i)||i.set(document.querySelector("[data-media-player]")===this.el),p(document,"focusin",a=>{const r=a.composedPath().find(h=>h instanceof Element&&h.localName==="media-player");r!==void 0&&i.set(this.el===r)})),l(()=>{i()&&(p(s,"keyup",this.zb.bind(this)),p(s,"keydown",this.Ab.bind(this)),p(s,"keydown",this.ng.bind(this),{capture:!0}))})}zb(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e!=null&&e.matches(Ls))return;let{method:s,value:i}=this.Zc(t);if(!w(i)&&!N(i)){i==null||i.callback(t);return}if(s!=null&&s.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this._a?(this.Ne(t,s==="seekForward"),this._a=null):(this.a.remote.seek(this.gc,t),this.gc=void 0)),s!=null&&s.startsWith("volume")){const a=this.el.querySelector("[data-media-volume-slider]");a==null||a.dispatchEvent(new KeyboardEvent("keyup",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}Ab(t){var a,r;if(!t.key||Os.has(t.key))return;const e=document.activeElement;if(e!=null&&e.matches(Ls)||ji(t)&&(e!=null&&e.matches(Da)))return;let{method:s,value:i}=this.Zc(t);if(!w(i)&&!N(i)){i==null||i.callback(t);return}if(!s&&!t.metaKey&&/[0-9]/.test(t.key)){t.preventDefault(),t.stopPropagation(),this.a.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(s){switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.qa(t,s,s==="seekForward");break;case"volumeUp":case"volumeDown":const h=this.el.querySelector("[data-media-volume-slider]");if(h)h.dispatchEvent(new KeyboardEvent("keydown",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const c=t.shiftKey?.1:.05;this.a.remote.changeVolume(this.$state.volume()+(s==="volumeUp"?+c:-c),t)}break;case"toggleFullscreen":this.a.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const o=this.$state.playbackRate();this.a.remote.changePlaybackRate(Math.max(.25,Math.min(2,o+(s==="speedUp"?.25:-.25))),t);break;default:(r=(a=this.a.remote)[s])==null||r.call(a,t)}this.$state.lastKeyboardAction.set({action:s,event:t})}}ng(t){Ma(t.target)&&this.Zc(t).method&&t.preventDefault()}Zc(t){const e={...this.$props.keyShortcuts(),...this.a.ariaKeys},s=Object.keys(e).find(i=>{var h;const a=e[i],r=N(a)?a.join(" "):w(a)?a:a==null?void 0:a.keys;return(h=N(r)?r:r==null?void 0:r.split(" "))==null?void 0:h.some(o=>_a(o).replace(/Control/g,"Ctrl").split("+").every(c=>Os.has(c)?t[c.toLowerCase()+"Key"]:t.key===c.replace("Space"," ")))});return{method:s,value:s?e[s]:null}}og(t,e){const s=t.shiftKey?10:5;return this.gc=Math.max(0,Math.min((this.gc??this.$state.currentTime())+(e==="seekForward"?+s:-s),this.$state.duration()))}Ne(t,e){var s;(s=this._a)==null||s.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}qa(t,e,s){this.$state.canSeek()&&(this._a||(this._a=this.el.querySelector("[data-media-time-slider]")),this._a?this.Ne(t,s):this.a.remote.seeking(this.og(t,e),t))}}const Ra=["!","@","#","$","%","^","&","*","(",")"];function _a(n){return n.replace(/Shift\+(\d)/g,(t,e)=>Ra[e-1])}class Fa extends W{constructor(t){super(),this._c=t}onAttach(t){const{$props:e,ariaKeys:s}=k(),i=t.getAttribute("aria-keyshortcuts");if(i){s[this._c]=i,x(()=>{delete s[this._c]});return}const a=e.keyShortcuts()[this._c];if(a){const r=N(a)?a.join(" "):w(a)?a:a==null?void 0:a.keys;t.setAttribute("aria-keyshortcuts",N(r)?r.join(" "):r)}}}class Na{constructor(){this.name="audio"}canPlay(t){return Ji(t)?t.type==="?"||Xi(this.target,t.type):!1}mediaType(){return"audio"}async load(t){return new(await K(()=>import("./vidstack-audio-6-S3G7ri.js"),__vite__mapDeps([2,3,4,5,1]))).AudioProvider(this.target,t)}}class bi{constructor(){this.name="video"}canPlay(t){return Di(t)?t.type==="?"||Ii(this.target,t.type):!1}mediaType(){return"video"}async load(t){return new(await K(()=>import("./vidstack-video-KYb_c11i.js"),__vite__mapDeps([6,4,3,5,1]))).VideoProvider(this.target,t)}}const Ft=class Ft extends bi{constructor(){super(...arguments),this.name="hls"}canPlay(t){return Ft.supported&&ci(t)}async load(t){return new(await K(()=>import("./vidstack-hls-x-miYTGI.js"),__vite__mapDeps([7,4,6,3,5,1]))).HLSProvider(this.target,t)}};Ft.supported=li();let de=Ft;class Va{constructor(){this.name="vimeo"}preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const e of t)Pt(e)}canPlay(t){return w(t.src)&&t.type==="video/vimeo"}mediaType(){return"video"}async load(t){return new(await K(()=>import("./vidstack-vimeo-AzAg8N-i.js"),__vite__mapDeps([8,4,5,9,10,1]))).VimeoProvider(this.target,t)}async loadPoster(t,e,s){const{resolveVimeoVideoId:i,getVimeoVideoInfo:a}=await K(()=>import("./vidstack-TotHz45K-JC8JAQ5K.js"),__vite__mapDeps([]));if(!w(t.src))return null;const{videoId:r}=i(t.src);return r?a(r,s).then(h=>h?h.poster:null):null}}class Ha{constructor(){this.name="youtube"}preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const e of t)Pt(e)}canPlay(t){return w(t.src)&&t.type==="video/youtube"}mediaType(){return"video"}async load(t){return new(await K(()=>import("./vidstack-youtube-hnN5Jujz.js"),__vite__mapDeps([11,4,9,12,1]))).YouTubeProvider(this.target,t)}async loadPoster(t,e,s){const{findYouTubePoster:i,resolveYouTubeVideoId:a}=await K(()=>import("./vidstack-eR7fRUWh-_wDIXJ0I.js"),__vite__mapDeps([])),r=w(t.src)&&a(t.src);return r?i(r,s):null}}const ae=Symbol(0),Ka=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],Ua={artist:"",autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:ja,storage:null};class qs extends ht{constructor(t,e){super(),this.vb=t,this.Ca=e}async onAttach(t){const e=this.$props[this.vb]();if(e==="eager")requestAnimationFrame(this.Ca);else if(e==="idle")Ri(this.Ca);else if(e==="visible"){let s,i=new IntersectionObserver(a=>{this.scope&&a[0].isIntersecting&&(s==null||s(),s=void 0,this.Ca())});i.observe(t),s=x(()=>i.disconnect())}}}class za{constructor(t,e){this.X=t,this.a=e,this.c=(s,...i)=>{this.X(new O(s,{detail:i==null?void 0:i[0],trigger:i==null?void 0:i[1]}))}}async jc(t,e){return _i(async()=>{var ds,ps,fs,ms,bs,gs;this.a;const{autoPlay:s,canPlay:i,started:a,duration:r,seekable:h,buffered:o,remotePlaybackInfo:c,playsInline:u}=this.a.$state;if(i())return;const f={duration:(t==null?void 0:t.duration)??r(),seekable:(t==null?void 0:t.seekable)??h(),buffered:(t==null?void 0:t.buffered)??o(),provider:this.a.$provider()};this.c("can-play",f,e),Z();let m=this.a.$provider(),{storage:b}=this.a,{muted:C,volume:V,clipStartTime:Zt,playbackRate:wi}=this.a.$props;const Pi=(ps=(ds=c())==null?void 0:ds.savedState)==null?void 0:ps.currentTime,xi=((ms=(fs=c())==null?void 0:fs.savedState)==null?void 0:ms.paused)===!1,us=Pi??await(b==null?void 0:b.getTime())??Zt(),Si=xi||s();m&&(m.setVolume(await(b==null?void 0:b.getVolume())??V()),m.setMuted(await(b==null?void 0:b.getMuted())??C()),(bs=m.setPlaybackRate)==null||bs.call(m,await(b==null?void 0:b.getPlaybackRate())??wi()),(gs=m.setPlaysInline)==null||gs.call(m,u()),us>0&&m.setCurrentTime(us)),i()&&Si&&!a()&&await this.oh(e),c.set(null)})}async oh(t){const{player:e,$state:{autoPlaying:s,muted:i}}=this.a;s.set(!0);const a=new O("auto-play-attempt",{trigger:t});try{await e.play(a)}catch{}}}class Qa{constructor(){this.e=new Map}k(t,e){this.e.set(t,e)}td(t){const e=this.kl(t);return this.e.delete(t),e}kl(t){return this.e.get(t)}qc(t){this.e.delete(t)}pl(){this.e.clear()}}class gi{constructor(){this.Mb=!1,this.Ed=he(),this.e=new Map}get ph(){return this.e.size}get Rj(){return this.Mb}async Sj(){this.Mb||await this.Ed.promise}k(t,e){if(this.Mb){e();return}this.e.delete(t),this.e.set(t,e)}td(t){var e;(e=this.e.get(t))==null||e(),this.e.delete(t)}Bb(){this.jf(),this.Mb=!0,this.e.size>0&&this.jf()}ra(){this.Mb=!1}H(){this.ra(),this.e.clear(),this.kf()}jf(){for(const t of this.e.keys())this.td(t);this.kf()}kf(){this.Ed.resolve(),this.Ed=he()}}class Wa extends ht{constructor(t,e,s){super(),this.ga=t,this.f=e,this.a=s,this.vk=new gi,this.vd=!1,this.uk=s.$provider,this.Ib=new ka,this.rc=new $a,this.ta=new Dt}onAttach(){this.listen("fullscreen-change",this.Oc.bind(this))}onConnect(){const t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e=this.qh.bind(this);for(const s of t)s.startsWith("media-")&&this.listen(s,e);this.Mk(),l(this.wk.bind(this)),l(this.rh.bind(this)),l(this.ll.bind(this)),l(this.Ll.bind(this)),l(this.sh.bind(this)),l(this.th.bind(this))}onDestroy(){this.vk.H()}Mk(){const{load:t}=this.$props,{canLoad:e}=this.$state;if(t()!=="play"||e())return;const s=this.listen("media-play-request",i=>{this.Lk(i),s()})}wk(){const t=this.uk(),e=this.$state.canPlay();return t&&e&&this.vk.Bb(),()=>{this.vk.ra()}}qh(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(d(this.uk)?this[t.type](t):this.vk.k(t.type,()=>{d(this.uk)&&this[t.type](t)}))}async sc(t){const{canPlay:e,paused:s,autoPlaying:i}=this.$state;if(!this.Lk(t)&&!(!d(s)&&!this.f.Ha)){t&&this.f.e.k("media-play-request",t);try{const a=d(this.uk);return re(a,d(e)),await a.play()}catch(a){const r=this.createEvent("play-fail",{detail:se(a),trigger:t});throw r.autoPlay=i(),this.ga.X(r),a}}}Lk(t){const{load:e}=this.$props,{canLoad:s}=this.$state;if(e()==="play"&&!s()){const i=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(i),this.vk.k("media-play-request",async()=>{try{await this.sc(i)}catch{}}),!0}return!1}async ud(t){const{canPlay:e,paused:s}=this.$state;if(!d(s)){t&&this.f.e.k("media-pause-request",t);try{const i=d(this.uk);return re(i,d(e)),await i.pause()}catch(i){throw this.f.e.qc("media-pause-request"),i}}}Ze(t){const{canPlay:e,live:s,liveEdge:i,canSeek:a,liveSyncPosition:r,seekableEnd:h,userBehindLiveEdge:o}=this.$state;if(o.set(!1),d(()=>!s()||i()||!a()))return;const c=d(this.uk);re(c,d(e)),t&&this.f.e.k("media-seek-request",t);const u=h()-2;c.setCurrentTime(Math.min(u,r()??u))}async _e(t="prefer-media",e){const s=this.$e(t);if(Ms(t,s),!s.active)return d(this.$state.pictureInPicture)&&(this.vd=!0,await this.wd(e)),e&&this.f.e.k("media-enter-fullscreen-request",e),s.enter()}async af(t="prefer-media",e){const s=this.$e(t);if(Ms(t,s),!!s.active){e&&this.f.e.k("media-exit-fullscreen-request",e);try{const i=await s.exit();return this.vd&&d(this.$state.canPictureInPicture)&&await this.xd(),i}finally{this.vd=!1}}}$e(t){const e=d(this.uk);return t==="prefer-media"&&this.rc.supported||t==="media"?this.rc:e==null?void 0:e.fullscreen}async xd(t){if(this.bf(),!this.$state.pictureInPicture())return t&&this.f.e.k("media-enter-pip-request",t),await this.uk().pictureInPicture.enter()}async wd(t){if(this.bf(),!!this.$state.pictureInPicture())return t&&this.f.e.k("media-exit-pip-request",t),await this.uk().pictureInPicture.exit()}bf(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}rh(){this.Ib.defaultDelay=this.$props.controlsDelay()}ll(){var s,i;const{canAirPlay:t}=this.$state,e=!!((i=(s=this.uk())==null?void 0:s.airPlay)!=null&&i.supported);t.set(e)}Ll(){const{canGoogleCast:t,source:e}=this.$state,s=Fi&&!Ni&&Vi(e());t.set(s)}sh(){var s,i;const{canFullscreen:t}=this.$state,e=this.rc.supported||!!((i=(s=this.uk())==null?void 0:s.fullscreen)!=null&&i.supported);t.set(e)}th(){var s,i;const{canPictureInPicture:t}=this.$state,e=!!((i=(s=this.uk())==null?void 0:s.pictureInPicture)!=null&&i.supported);t.set(e)}async"media-airplay-request"(t){try{await this.ol(t)}catch{}}async ol(t){var e;try{const s=(e=this.uk())==null?void 0:e.airPlay;if(!(s!=null&&s.supported))throw Error("No AirPlay adapter.");return t&&this.f.e.k("media-airplay-request",t),await s.prompt()}catch(s){throw this.f.e.qc("media-airplay-request"),s}}async"media-google-cast-request"(t){try{await this.ul(t)}catch{}}async ul(t){try{const{canGoogleCast:e}=this.$state;if(!d(e))throw new Error("Cast not available.");if(Pt("https://www.gstatic.com"),!this.om){const i=await K(()=>import("./vidstack-H1mKklxM-82I673ck.js").then(a=>a.v),__vite__mapDeps([13,1,4]));this.om=new i.GoogleCastLoader}await this.om.prompt(this.a),t&&this.f.e.k("media-google-cast-request",t);const s=d(this.$state.remotePlaybackState)!=="disconnected";s&&this.$state.remotePlaybackInfo.set(i=>({...i,savedState:{paused:d(this.$state.paused),currentTime:d(this.$state.currentTime)}})),this.$state.remotePlaybackLoader.set(s?this.om:null)}catch(e){throw this.f.e.qc("media-google-cast-request"),e}}"media-audio-track-change-request"(t){if(this.a.audioTracks.readonly)return;const e=t.detail,s=this.a.audioTracks[e];if(s){const i=t.type;this.f.e.k(i,t),s.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this._e(t.detail,t)}catch(e){this._b(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.af(t.detail,t)}catch(e){this._b(e,t)}}async Oc(t){const e=d(this.$props.fullscreenOrientation),s=t.detail;if(!(bt(e)||!this.ta.supported))if(s){if(this.ta.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.ta.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}_b(t,e){this.ga.X(this.createEvent("fullscreen-error",{detail:se(t)}))}async"media-orientation-lock-request"(t){const e=t.type;try{this.f.e.k(e,t),await this.ta.lock(t.detail)}catch{this.f.e.qc(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{this.f.e.k(e,t),await this.ta.unlock()}catch{this.f.e.qc(e)}}async"media-enter-pip-request"(t){try{await this.xd(t)}catch(e){this.cf(e,t)}}async"media-exit-pip-request"(t){try{await this.wd(t)}catch(e){this.cf(e,t)}}cf(t,e){this.ga.X(this.createEvent("picture-in-picture-error",{detail:se(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:i}=this.$state;if(!(!e()||s()||!i())){this.f.e.k("media-seek-request",t);try{this.Ze()}catch{this.f.e.qc("media-seek-request")}}}async"media-loop-request"(t){try{this.f.Ha=!0,this.f.gb=!0,await this.sc(t)}catch{this.f.Ha=!1}}async"media-pause-request"(t){if(!this.$state.paused())try{await this.ud(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.sc(t)}catch{}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const i=this.uk();i!=null&&i.setPlaybackRate&&(this.f.e.k("media-rate-change-request",t),i.setPlaybackRate(t.detail))}"media-quality-change-request"(t){if(this.a.qualities.readonly)return;this.f.e.k("media-quality-change-request",t);const e=t.detail;if(e<0)this.a.qualities.autoSelect(t);else{const s=this.a.qualities[e];s&&(s.selected=!0)}}"media-pause-controls-request"(t){const e=t.type;this.f.e.k(e,t),this.Ib.pause(t)}"media-resume-controls-request"(t){const e=t.type;this.f.e.k(e,t),this.Ib.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:s,ended:i,canSeek:a,live:r,userBehindLiveEdge:h,clipStartTime:o}=this.$state;i()&&(this.f.gb=!0);const c=t.type;this.f.qa=!1,this.f.e.qc(c);const u=Math.min(Math.max(e()+.1,t.detail+o()),s()-.1);!Number.isFinite(u)||!a()||(this.f.e.k(c,t),this.uk().setCurrentTime(u),r()&&t.isOriginTrusted&&Math.abs(s()-u)>=2&&h.set(!0))}"media-seeking-request"(t){const e=t.type;this.f.e.k(e,t),this.$state.seeking.set(!0),this.f.qa=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;this.f.e.k(e,t),this.ga.X(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;this.f.e.k(e,t),this.ga.X(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,i=this.a.textTracks[e];if(i){const a=t.type;this.f.e.k(a,t),i.setMode(s,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;this.f.e.k(e,t),this.uk().setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;if(!e())return;const i=t.type;this.f.e.k(i,t),this.a.$provider().setMuted(!1),s()===0&&(this.f.e.k(i,t),this.uk().setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,i=t.detail;if(s()===i)return;const a=t.type;this.f.e.k(a,t),this.uk().setVolume(i),i>0&&e()&&(this.f.e.k(a,t),this.uk().setMuted(!1))}ql(t,e,s){}}function re(n,t){if(!(n&&t))throw Error("[vidstack] media not ready")}function Ms(n,t){if(!(t!=null&&t.supported))throw Error("[vidstack] no fullscreen support")}class Ja{constructor(){this.qa=!1,this.Ha=!1,this.gb=!1,this.e=new Qa}}const Xa=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class Ba extends ht{constructor(t,e){super(),this.f=t,this.a=e,this.p=new Map,this.Kk=!1,this.tc=!1,this.Jb=!1,this.seeking=xt(s=>{const{seeking:i,realCurrentTime:a,paused:r}=this.$state;i.set(!0),a.set(s.detail),this.F("media-seeking-request",s),r()&&(this.hb=s,this.zd())},150,{leading:!0}),this.zd=xe(()=>{if(!this.hb)return;this.tc=!0;const{waiting:s,playing:i}=this.$state;s.set(!0),i.set(!1);const a=this.createEvent("waiting",{trigger:this.hb});this.p.set("waiting",a),this.dispatch(a),this.hb=void 0,this.tc=!1},300)}onAttach(t){t.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(t){l(this.nm.bind(this)),this.uh(),this.vh(),this.wh(),this.xh(),x(this.yh.bind(this))}X(t){var s;if(!this.scope)return;const e=t.type;(s=this[t.type])==null||s.call(this,t),Xa.has(e)&&this.p.set(e,t),this.dispatch(t)}xh(){this.Jb&&(requestAnimationFrame(()=>{this.scope&&this.a.remote.play(new O("dom-connect"))}),this.Jb=!1)}yh(){var t;this.Jb||(this.Jb=!this.a.$state.paused(),(t=this.a.$provider())==null||t.pause())}ib(){this.df(),this.Kk=!1,this.f.gb=!1,this.f.Ha=!1,this.tc=!1,this.hb=void 0,this.p.clear()}F(t,e){const s=this.f.e.td(t);s&&(e.request=s,e.triggers.add(s))}uh(){this.yd(),this.ef();const t=this.a.textTracks;p(t,"add",this.yd.bind(this)),p(t,"remove",this.yd.bind(this)),p(t,"mode-change",this.ef.bind(this))}vh(){const t=this.a.qualities;p(t,"add",this.pc.bind(this)),p(t,"remove",this.pc.bind(this)),p(t,"change",this.fb.bind(this)),p(t,"auto-change",this.zh.bind(this)),p(t,"readonly-change",this.Ah.bind(this))}wh(){const t=this.a.audioTracks;p(t,"add",this.ff.bind(this)),p(t,"remove",this.ff.bind(this)),p(t,"change",this.Bh.bind(this))}yd(t){const{textTracks:e}=this.$state;e.set(this.a.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}ef(t){t&&this.F("media-text-track-change-request",t);const e=this.a.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}ff(t){const{audioTracks:e}=this.$state;e.set(this.a.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}Bh(t){const{audioTrack:e}=this.$state;e.set(this.a.audioTracks.selected),t&&this.F("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}pc(t){const{qualities:e}=this.$state;e.set(this.a.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}fb(t){const{quality:e}=this.$state;e.set(this.a.qualities.selected),t&&this.F("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}zh(){this.$state.autoQuality.set(this.a.qualities.auto)}Ah(){this.$state.canSetQuality.set(!this.a.qualities.readonly)}nm(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e()){t.set(!1);return}Hi().then(t.set)}"provider-change"(t){var i,a;const e=this.a.$provider(),s=t.detail;(e==null?void 0:e.type)!==(s==null?void 0:s.type)&&((i=e==null?void 0:e.destroy)==null||i.call(e),(a=e==null?void 0:e.scope)==null||a.dispose(),this.a.$provider.set(t.detail),e&&t.detail===null&&this.gf(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.ib()}"can-load"(t){this.$state.canLoad.set(!0),this.p.set("can-load",t),this.a.textTracks[$.P](),this.F("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.p.set("can-load-poster",t),this.F("media-poster-start-loading",t)}"media-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const i=this.$state.providedViewType(),a=i==="unknown"?t.detail:i;s!==a&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:a,trigger:t}))})},0)}"stream-type-change"(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:i}=this.$state;i.set(t.detail),t.detail=s()}"rate-change"(t){var i;const{storage:e}=this.a,{canPlay:s}=this.$state;this.$state.playbackRate.set(t.detail),this.F("media-rate-change-request",t),s()&&((i=e==null?void 0:e.setPlaybackRate)==null||i.call(e,t.detail))}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:s}=this.$state,{type:i,state:a}=t.detail,r=a==="connected";s.set(i),e.set(a);const h=i==="airplay"?"media-airplay-request":"media-google-cast-request";if(r)this.F(h,t);else{const o=this.f.e.kl(h);o&&(t.request=o,t.triggers.add(o))}}"sources-change"(t){this.$state.sources.set(t.detail)}"source-change"(t){var s;const e=this.p.get("sources-change");e&&t.triggers.add(e),this.gf(t),this.p.set(t.type,t),this.$state.source.set(t.detail),(s=this.el)==null||s.setAttribute("aria-busy","true")}gf(t){this.a.audioTracks[E.H](t),this.a.qualities[E.H](t),this.ib(),ma(this.a.$state)}abort(t){const e=this.p.get("source-change");e&&t.triggers.add(e);const s=this.p.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.p.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.p.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.p.get("load-start");e&&t.triggers.add(e)}"can-play"(t){var s;const e=this.p.get("loaded-metadata");e&&t.triggers.add(e),this.hf(t.detail),(s=this.el)==null||s.setAttribute("aria-busy","false")}"can-play-through"(t){this.hf(t.detail);const e=this.p.get("can-play");e&&t.triggers.add(e)}hf(t){const{seekable:e,seekableEnd:s,buffered:i,intrinsicDuration:a,canPlay:r}=this.$state;r.set(!0),i.set(t.buffered),e.set(t.seekable),a.set(s())}"duration-change"(t){const{live:e,intrinsicDuration:s}=this.$state,i=t.detail;e()||s.set(Number.isNaN(i)?0:i)}progress(t){const{buffered:e,seekable:s,live:i,intrinsicDuration:a,seekableEnd:r}=this.$state,h=t.detail;e.set(h.buffered),s.set(h.seekable),i()&&(a.set(r),this.dispatch("duration-change",{detail:r(),trigger:t}))}play(t){const{paused:e,autoPlayError:s,ended:i,autoPlaying:a,playsInline:r,pointer:h,muted:o,viewType:c}=this.$state;if(this.Gk(),!e()&&!this.f.Ha){t.stopImmediatePropagation();return}t.autoPlay=a();const u=this.p.get("waiting");u&&t.triggers.add(u),this.F("media-play-request",t),this.p.set("play",t),e.set(!1),s.set(null),t.autoPlay&&(this.X(this.createEvent("auto-play",{detail:{muted:o()},trigger:t})),a.set(!1)),(i()||this.f.gb)&&(this.f.gb=!1,i.set(!1),this.X(this.createEvent("replay",{trigger:t}))),!r()&&c()==="video"&&h()==="coarse"&&this.a.remote.enterFullscreen("prefer-media",t),this.f.Ha&&t.stopImmediatePropagation()}Gk(t){if(!d(this.a.$provider))return;const{ended:s,seekableStart:i,clipStartTime:a,clipEndTime:r,realCurrentTime:h,duration:o}=this.$state,c=h()<a()||r()>0&&h()>=r()||Math.abs(h()-o())<.1||s();return c&&this.dispatch("media-seek-request",{detail:(a()>0?0:i())+.1,trigger:t}),c}"play-fail"(t){const{muted:e,autoPlaying:s}=this.$state,i=this.p.get("play");i&&t.triggers.add(i),this.F("media-play-request",t);const{paused:a,playing:r}=this.$state;a.set(!0),r.set(!1),this.ib(),this.p.set("play-fail",t),t.autoPlay&&(this.X(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.p.get("play"),s=this.p.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout(()=>this.ib(),0);const{paused:i,playing:a,live:r,liveSyncPosition:h,seekableEnd:o,started:c,currentTime:u,seeking:f,ended:m}=this.$state;if(i.set(!1),a.set(!0),f.set(!1),m.set(!1),this.f.Ha){t.stopImmediatePropagation(),this.f.Ha=!1;return}if(r()&&!c()&&u()===0){const b=h()??o()-2;Number.isFinite(b)&&this.a.$provider().setCurrentTime(b)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.X(this.createEvent("started",{trigger:t})))}pause(t){var a;(a=this.el)!=null&&a.isConnected||(this.Jb=!0),this.F("media-pause-request",t);const e=this.p.get("seeked");if(e&&t.triggers.add(e),this.Kk){t.stopImmediatePropagation(),this.X(this.createEvent("end",{trigger:t})),this.Kk=!1;return}if(this.f.Ha){t.stopImmediatePropagation();return}this.ib();const{paused:s,playing:i}=this.$state;s.set(!0),i.set(!1)}"time-update"(t){if(this.f.Ha){t.stopImmediatePropagation();return}const{realCurrentTime:e,played:s,waiting:i,clipEndTime:a,loop:r}=this.$state,h=a(),o=t.detail;e.set(o.currentTime),s.set(o.played),i.set(!1);for(const c of this.a.textTracks)c[$.Ta](o.currentTime,t);h>0&&o.currentTime>=h&&(r()&&(this.f.Ha=!0),this.Kk=!0,this.dispatch("media-pause-request",{trigger:t})),this.Nk()}Nk(){var i;const{storage:t}=this.a,{canPlay:e,realCurrentTime:s}=this.$state;e()&&((i=t==null?void 0:t.setTime)==null||i.call(t,s()))}"volume-change"(t){var h,o;const{storage:e}=this.a,{volume:s,muted:i,canPlay:a}=this.$state,r=t.detail;s.set(r.volume),i.set(r.muted||r.volume===0),this.F("media-volume-change-request",t),this.F(r.muted?"media-mute-request":"media-unmute-request",t),a()&&((h=e==null?void 0:e.setVolume)==null||h.call(e,s()),(o=e==null?void 0:e.setMuted)==null||o.call(e,i()))}seeked(t){const{seeking:e,realCurrentTime:s,paused:i,duration:a,ended:r}=this.$state;if(this.f.qa)e.set(!0),t.stopImmediatePropagation();else if(e()){const h=this.p.get("waiting");h&&t.triggers.add(h);const o=this.p.get("seeking");o&&!t.triggers.has(o)&&t.triggers.add(o),i()&&this.df(),e.set(!1),t.detail!==a()&&r.set(!1),s.set(t.detail),this.F("media-seek-request",t);const c=t==null?void 0:t.originEvent;c!=null&&c.isTrusted&&!/seek/.test(c.type)&&this.started(t)}}waiting(t){this.tc||this.f.qa||(t.stopImmediatePropagation(),this.hb=t,this.zd())}end(t){const{loop:e}=this.$state;if(e()){setTimeout(()=>{requestAnimationFrame(()=>{this.dispatch("media-loop-request",{trigger:t})})},10);return}this.Db(t)}Db(t){const{paused:e,seeking:s,ended:i,duration:a}=this.$state;e()||this.dispatch("pause",{trigger:t}),s()&&this.dispatch("seeked",{detail:a(),trigger:t}),i.set(!0),this.ib(),this.dispatch("ended",{trigger:t})}df(){this.zd.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),this.F(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.F("media-enter-fullscreen-request",t),this.F("media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;this.F(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),this.F(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.F("media-enter-pip-request",t),this.F("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class Ya extends ht{onSetup(){this.Ch(),l(this.Om.bind(this)),l(this.Fh.bind(this)),l(this.Ek.bind(this)),l(this.Vc.bind(this)),l(this.Hh.bind(this)),l(this.pn.bind(this)),l(this.Jh.bind(this)),l(this.Kh.bind(this)),l(this.Ih.bind(this)),l(this.Gh.bind(this)),l(this.Vm.bind(this)),l(this.ld.bind(this)),l(this.Eh.bind(this)),l(this.uc.bind(this))}Ch(){var s;const t={duration:"providedDuration",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const i of Object.keys(this.$props))e.has(i)||(s=this.$state[t[i]??i])==null||s.set(this.$props[i]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}Eh(){const{viewType:t,streamType:e,title:s,poster:i}=this.$props;this.$state.providedPoster.set(i()),this.$state.providedStreamType.set(e()),this.$state.providedViewType.set(t()),this.$state.providedTitle.set(s())}Dh(){}Om(){const{artist:t}=this.$props;this.$state.artist.set(t())}uc(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}Fh(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}Gh(){const t=this.$props.loop();this.$state.loop.set(t),this.dispatch("loop-change",{detail:t})}Vc(){const t=this.$props.controls();this.$state.controls.set(t)}ld(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}Hh(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=t===!0?"":t;this.$state.crossOrigin.set(e)}pn(){const{providedDuration:t}=this.$state;t.set(this.$props.duration())}Vm(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}Ek(){const{clipStartTime:t,clipEndTime:e}=this.$props;this.$state.clipStartTime.set(t()),this.$state.clipEndTime.set(e())}Jh(){this.dispatch("live-change",{detail:this.$state.live()})}Ih(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Kh(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}const mt=class mt extends ht{constructor(){super()}onConnect(){l(this.Pm.bind(this)),l(this.Qm.bind(this));const t=this.Rm.bind(this);for(const e of mt.Nm)navigator.mediaSession.setActionHandler(e,t);x(this.ya.bind(this))}ya(){for(const t of mt.Nm)navigator.mediaSession.setActionHandler(t,null)}Pm(){const{title:t,artist:e,poster:s}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:[{src:s()}]})}Qm(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}Rm(t){const e=new O("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:U(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??10),trigger:e});break}}};mt.Nm=["play","pause","seekforward","seekbackward","seekto"];let pe=mt,It=v(!1);p(document,"pointerdown",()=>{It.set(!1)}),p(document,"keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||It.set(!0)});class X extends W{constructor(){super(...arguments),this.Kb=v(!1)}onConnect(t){l(()=>{if(!It()){this.Kb.set(!1),At(t,!1),this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointerleave",this.Dd.bind(this));return}const e=document.activeElement===t;this.Kb.set(e),At(t,e),this.listen("focus",this.Lb.bind(this)),this.listen("blur",this.Nh.bind(this))})}focused(){return this.Kb()}Lb(){this.Kb.set(!0),At(this.el,!0)}Nh(){this.Kb.set(!1),At(this.el,!1)}Cd(){js(this.el,!0)}Dd(){js(this.el,!1)}}function At(n,t){T(n,"data-focus",t),T(n,"data-hocus",t)}function js(n,t){T(n,"data-hocus",t),T(n,"data-hover",t)}var Ga=Object.defineProperty,Za=Object.getOwnPropertyDescriptor,A=(n,t,e,s)=>{for(var i=s>1?void 0:s?Za(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Ga(t,e,i),i},G;const S=(G=class extends g{constructor(){super(),this.canPlayQueue=new gi,this.wc=!1,new Ya;const t={player:this,qualities:new Oa,audioTracks:new Ca,storage:null,$provider:v(null),$providerSetup:v(!1),$props:this.$props,$state:this.$state};t.remote=new Ta(void 0),t.remote.setPlayer(this),t.$iosControls=lt(this.Oh.bind(this)),t.textTracks=new Aa,t.textTracks[$.al]=this.$state.crossOrigin,t.textRenderers=new Sa(t),t.ariaKeys={},this.a=t,Q(Ei,t),this.orientation=new Dt,new X,new Ia(t);const e=new Ja;this.ga=new Ba(e,t),this.Y=new Wa(this.ga,e,t),t.delegate=new za(this.ga.X.bind(this.ga),t),new pe,new qs("load",this.startLoading.bind(this)),new qs("posterLoad",this.startLoadingPoster.bind(this))}get i(){return this.a.$provider()}onSetup(){this.Ph(),l(this.Qh.bind(this)),l(this.Rh.bind(this)),l(this.Tc.bind(this)),l(this.Fd.bind(this)),l(this.jb.bind(this)),l(this.Vm.bind(this)),l(this.Sh.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),P(t,"tabindex","0"),P(t,"role","region"),l(this.Tm.bind(this)),l(this.uc.bind(this)),l(this.lf.bind(this)),p(t,"find-media-player",this.Th.bind(this))}onConnect(t){ys&&T(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");this.mf(e),e.onchange=this.mf.bind(this);const s=new ResizeObserver(ut(this.O.bind(this)));s.observe(t),l(this.O.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),x(()=>{s.disconnect(),e.onchange=null})}onDestroy(){this.a.player=null,this.canPlayQueue.H()}uc(){const t=this.$el,{title:e,live:s,viewType:i,providedTitle:a}=this.$state,r=s(),h=Ai(i()),o=h!=="Unknown"?`${r?"Live ":""}${h}`:r?"Live":"Media",c=e();T(this.el,"aria-label",c?`${o} - ${c}`:o+" Player"),t!=null&&t.hasAttribute("title")&&(this.wc=!0,t==null||t.removeAttribute("title"))}lf(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),T(this.el,"data-orientation",t),this.O()}Qh(){this.$state.canPlay()&&this.i?this.canPlayQueue.Bb():this.canPlayQueue.ra()}Ph(){if(G[ae]){this.setAttributes(G[ae]);return}const t={"data-load":function(){return this.$props.load()},"data-captions":function(){const s=this.$state.textTrack();return!!s&&D(s)},"data-ios-controls":function(){return this.a.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:s,canPlay:i,waiting:a}=this.$state;return s()&&(!i()||a())},"data-error":function(){const{error:s}=this.$state;return!!s()},"data-autoplay-error":function(){const{autoPlayError:s}=this.$state;return!!s()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const s of Ka){const i="data-"+(e[s]??Ci(s));t[i]=function(){return this.$state[s]()}}delete t.title,G[ae]=t,this.setAttributes(t)}Th(t){t.detail(this)}O(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),z(this.el,"--player-width",t+"px"),z(this.el,"--player-height",e+"px")}mf(t){const e=t.matches?"coarse":"fine";T(this.el,"data-pointer",e),this.$state.pointer.set(e),this.O()}Oh(){const{playsInline:t,fullscreen:e}=this.$state;return ys&&!va()&&this.$state.mediaType()==="video"&&(!t()||e())}get provider(){return this.i}get controls(){return this.Y.Ib}get title(){return d(this.$state.providedTitle)}set title(t){if(this.wc){this.wc=!1;return}this.$state.providedTitle.set(t)}get qualities(){return this.a.qualities}get audioTracks(){return this.a.audioTracks}get textTracks(){return this.a.textTracks}get textRenderers(){return this.a.textRenderers}get paused(){return d(this.$state.paused)}set paused(t){this.nf(t)}Tc(){this.nf(this.$props.paused())}nf(t){t?this.canPlayQueue.k("paused",()=>this.Y.ud()):this.canPlayQueue.k("paused",()=>this.Y.sc())}get muted(){return d(this.$state.muted)}set muted(t){this.$props.muted.set(t)}Rh(){this.Uh(this.$props.muted())}Uh(t){this.canPlayQueue.k("muted",()=>{this.i&&this.i.setMuted(t)})}get currentTime(){return d(this.$state.currentTime)}set currentTime(t){this.of(t)}jb(){this.of(this.$props.currentTime())}of(t){this.canPlayQueue.k("currentTime",()=>{const{currentTime:e,clipStartTime:s,seekableStart:i,seekableEnd:a}=this.$state;t!==d(e)&&d(()=>{if(!this.i)return;const r=Math.min(Math.max(i()+.1,t+s()),a()-.1);Number.isFinite(r)&&this.i.setCurrentTime(r)})})}get volume(){return d(this.$state.volume)}set volume(t){this.$props.volume.set(t)}Fd(){this.Vh(this.$props.volume())}Vh(t){const e=Pe(0,t,1);this.canPlayQueue.k("volume",()=>{this.i&&this.i.setVolume(e)})}get playbackRate(){return d(this.$state.playbackRate)}set playbackRate(t){this.pf(t)}Sh(){this.pf(this.$props.playbackRate())}pf(t){this.canPlayQueue.k("rate",()=>{var e,s;this.i&&((s=(e=this.i).setPlaybackRate)==null||s.call(e,t))})}Vm(){this.Wm(this.$props.playsInline())}Wm(t){this.canPlayQueue.k("playsinline",()=>{var e,s;this.i&&((s=(e=this.i).setPlaysInline)==null||s.call(e,t))})}Tm(){var s;let t=this.$props.storage(),e=w(t)?new Pa:t;if(e!=null&&e.onChange){const{source:i}=this.$state,a=w(t)?t:(s=this.el)==null?void 0:s.id,r=lt(this.Um.bind(this));l(()=>e.onChange(i(),r(),a))}this.a.storage=e,this.a.textTracks.setStorage(e),x(()=>{var i;(i=e==null?void 0:e.onDestroy)==null||i.call(e),this.a.storage=null,this.a.textTracks.setStorage(null)})}Um(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:s}=this.$state,i=s();return i.src?`${i.src}:${t()}:${e()}`:null}async play(t){return this.Y.sc(t)}async pause(t){return this.Y.ud(t)}async enterFullscreen(t,e){return this.Y._e(t,e)}async exitFullscreen(t,e){return this.Y.af(t,e)}enterPictureInPicture(t){return this.Y.xd(t)}exitPictureInPicture(t){return this.Y.wd(t)}seekToLiveEdge(t){this.Y.Ze(t)}startLoading(t){this.a.delegate.c("can-load",void 0,t)}startLoadingPoster(t){this.a.delegate.c("can-load-poster",void 0,t)}requestAirPlay(t){return this.Y.ol(t)}requestGoogleCast(t){return this.Y.ul(t)}destroy(){this.a.remote.setPlayer(null),this.dispatch("destroy")}},G.props=Ua,G.state=fi,G);A([y],S.prototype,"canPlayQueue",2);A([y],S.prototype,"provider",1);A([y],S.prototype,"controls",1);A([y],S.prototype,"orientation",2);A([y],S.prototype,"title",1);A([y],S.prototype,"qualities",1);A([y],S.prototype,"audioTracks",1);A([y],S.prototype,"textTracks",1);A([y],S.prototype,"textRenderers",1);A([y],S.prototype,"paused",1);A([y],S.prototype,"muted",1);A([y],S.prototype,"currentTime",1);A([y],S.prototype,"volume",1);A([y],S.prototype,"playbackRate",1);A([L],S.prototype,"play",1);A([L],S.prototype,"pause",1);A([L],S.prototype,"enterFullscreen",1);A([L],S.prototype,"exitFullscreen",1);A([L],S.prototype,"enterPictureInPicture",1);A([L],S.prototype,"exitPictureInPicture",1);A([L],S.prototype,"seekToLiveEdge",1);A([L],S.prototype,"startLoading",1);A([L],S.prototype,"startLoadingPoster",1);A([L],S.prototype,"requestAirPlay",1);A([L],S.prototype,"requestGoogleCast",1);let Zr=S;function yi(n,t){return fetch(n,t).then(e=>e.text()).then(e=>{const s=tr(e);if(s)return yi(/^https?:/.test(s)?s:new URL(s,n).href,t);const i=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(e)?"on-demand":"live";return i==="live"&&er(e)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(e)||e.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":i})}function tr(n){const t=n.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function er(n){const t=n.split(`
`);for(const e of t)if(e.startsWith("#EXT-X-TARGETDURATION")){const s=parseFloat(e.split(":")[1]);if(!isNaN(s))return s}return-1}const $i=new Map;class sr{constructor(t,e,s,i=[]){this.xc=t,this.a=e,this.ha=s,this.Gd=!1;const a=new de,r=new bi,h=new Na,o=new Ha,c=new Va,u=[o,c];this.Hd=lt(()=>{const m=e.$state.remotePlaybackLoader(),b=e.$props.preferNativeHLS()?[r,h,a,...u,...i]:[a,r,h,...u,...i];return m?[m,...b]:b});const{$state:f}=e;f.sources.set(Ds(e.$props.src()));for(const m of f.sources()){const b=this.Hd().find(V=>V.canPlay(m));if(!b)continue;const C=b.mediaType(m);this.a.$state.source.set(m),this.a.$state.mediaType.set(C),this.a.$state.inferredViewType.set(C),this.ha.set(b),this.Gd=!0}}get c(){return this.a.delegate.c}connect(){const t=this.ha();this.Gd&&(this.qf(this.a.$state.source(),t),this.rf(t),this.Gd=!1),l(this.Xh.bind(this)),l(this.Yh.bind(this)),l(this.Zh.bind(this)),l(this._h.bind(this)),l(this.Ok.bind(this))}Xh(){this.c("sources-change",[...Ds(this.a.$props.src()),...this.xc()])}Yh(){var r;const{$state:t}=this.a,e=t.sources(),s=d(t.source),i=this.sf(s,e);if(((r=e[0])==null?void 0:r.src)&&!i.src&&!i.type){const{crossOrigin:h}=t,o=Mt(h()),c=new AbortController;return Promise.all(e.map(u=>w(u.src)&&u.type==="?"?fetch(u.src,{method:"HEAD",credentials:o,signal:c.signal}).then(f=>(u.type=f.headers.get("content-type")||"??",$i.set(u.src,u.type),u)).catch(()=>u):u)).then(u=>{c.signal.aborted||(this.sf(d(t.source),u),Z())}),()=>c.abort()}Z()}sf(t,e){let s={src:"",type:""},i=null,a=this.Hd();for(const r of e){const h=a.find(o=>o.canPlay(r));if(h){s=r,i=h;break}}return Is(t,s)||this.qf(s,i),i!==d(this.ha)&&this.rf(i),s}qf(t,e){this.c("source-change",t),this.c("media-type-change",(e==null?void 0:e.mediaType(t))||"unknown")}rf(t){this.a.$providerSetup.set(!1),this.c("provider-change",null),t&&d(()=>{var e;return(e=t.preconnect)==null?void 0:e.call(t,this.a)}),this.ha.set(t),this.c("provider-loader-change",t)}Zh(){const t=this.a.$provider();if(!(!t||d(this.a.$providerSetup))){if(this.a.$state.canLoad()){Xt(()=>t.setup(),t.scope),this.a.$providerSetup.set(!0);return}d(()=>{var e;return(e=t.preconnect)==null?void 0:e.call(t)})}}_h(){if(!this.a.$providerSetup())return;const t=this.a.$provider(),e=this.a.$state.source(),s=d(this.a.$state.crossOrigin);if(!Is(t==null?void 0:t.currentSrc,e)){if(this.a.$state.canLoad()){const i=new AbortController;return ci(e)?li()||yi(e.src,{credentials:Mt(s),signal:i.signal}).then(a=>{this.c("stream-type-change",a)}).catch(Ki):this.c("stream-type-change","on-demand"),d(()=>{const a=d(this.a.$state.preload);return t==null?void 0:t.loadSource(e,a).catch(r=>{})}),()=>i.abort()}try{w(e.src)&&Pt(new URL(e.src).origin)}catch{}}}Ok(){const t=this.ha(),{source:e,canLoadPoster:s}=this.a.$state;if(!t||!t.loadPoster||!e()||!s())return;const i=new AbortController,a=new O("source-change",{detail:e});return t.loadPoster(e(),this.a,i).then(r=>{this.c("poster-change",r||"",a)}).catch(()=>{this.c("poster-change","",a)}),()=>{i.abort()}}}function Ds(n){return(N(n)?n:[!w(n)&&"src"in n?n:{src:n}]).map(({src:t,type:e,...s})=>({src:t,type:e??(w(t)?$i.get(t):null)??(!w(t)||t.startsWith("blob:")?"video/object":t.includes("youtube")?"video/youtube":t.includes("vimeo")?"video/vimeo":"?"),...s})).sort(t=>t.type==="?"?1:-1)}function Is(n,t){return(n==null?void 0:n.src)===(t==null?void 0:t.src)&&(n==null?void 0:n.type)===(t==null?void 0:t.type)}class ir{constructor(t,e){this.yc=t,this.a=e,this.tf=[],l(this.$h.bind(this))}$h(){const t=this.yc();for(const e of this.tf)if(!t.some(s=>s.id===e.id)){const s=e.id&&this.a.textTracks.getById(e.id);s&&this.a.textTracks.remove(s)}for(const e of t){const s=e.id||ue.createId(e);this.a.textTracks.getById(s)||(e.id=s,this.a.textTracks.add(e))}this.tf=t}}var ar=Object.defineProperty,rr=Object.getOwnPropertyDescriptor,nr=(n,t,e,s)=>{for(var i=s>1?void 0:s?rr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&ar(t,e,i),i};const Nt=class Nt extends g{constructor(){super(...arguments),this.xc=v([]),this.yc=v([]),this.ha=null,this.Id=-1}onSetup(){this.a=k(),this.uf=new sr(this.xc,this.a,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.uf.connect(),new ir(this.yc,this.a);const e=new ResizeObserver(ut(this.O.bind(this)));e.observe(t);const s=new MutationObserver(this.vf.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.O(),this.vf(),x(()=>{e.disconnect(),s.disconnect()})}load(t){window.cancelAnimationFrame(this.Id),this.Id=requestAnimationFrame(()=>this.ai(t)),x(()=>{window.cancelAnimationFrame(this.Id)})}ai(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.a;this.ha===e&&(e==null?void 0:e.target)===t&&d(s)||(this.wf(),this.ha=e,e&&(e.target=t||null),!(!e||!t)&&e.load(this.a).then(i=>{this.scope&&d(this.$state.loader)===e&&this.a.delegate.c("provider-change",i)}))}onDestroy(){this.ha=null,this.wf()}wf(){this.a.delegate.c("provider-change",null)}O(){if(!this.el)return;const t=this.a.player,e=this.el.offsetWidth,s=this.el.offsetHeight;t&&(t.$state.mediaWidth.set(e),t.$state.mediaHeight.set(s),t.el&&(z(t.el,"--media-width",e+"px"),z(t.el,"--media-height",s+"px")))}vf(){const t=[],e=[],s=this.el.children;for(const i of s)i instanceof HTMLSourceElement?t.push({src:i.src,type:i.type}):i instanceof HTMLTrackElement&&e.push({id:i.id,src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")});this.xc.set(t),this.yc.set(e),Z()}};Nt.props={loaders:[]},Nt.state=new nt({loader:null});let fe=Nt;nr([L],fe.prototype,"load",1);const je=class je extends g{onSetup(){this.a=k(),l(this.bi.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.a.$state;z(t,"pointer-events","none"),P(t,"role","group"),this.setAttributes({"data-visible":this.xf.bind(this),"data-fullscreen":s,"data-pip":e}),l(()=>{this.dispatch("change",{detail:this.xf()})}),l(this.ci.bind(this)),l(()=>{const i=s();for(const a of["top","right","bottom","left"])z(t,`padding-${a}`,i&&`env(safe-area-inset-${a})`)})}ci(){if(!this.el)return;const{$iosControls:t}=this.a,{controls:e}=this.a.$state,s=e()||t();T(this.el,"aria-hidden",s?"true":null),z(this.el,"display",s?"none":null)}bi(){const{controls:t}=this.a.player,{hideDelay:e,hideOnMouseLeave:s}=this.$props;t.defaultDelay=e()===2e3?this.a.$props.controlsDelay():e(),t.hideOnMouseLeave=s()}xf(){const{controlsVisible:t}=this.a.$state;return t()}};je.props={hideDelay:2e3,hideOnMouseLeave:!1};let Rs=je;class vi extends W{constructor(t){super(),this.j=t,this.Ac=-1,this.Bc=-1,this.Ia=null,l(this.di.bind(this))}onDestroy(){var t;(t=this.Ia)==null||t.call(this),this.Ia=null}di(){const t=this.j.C();if(!t){this.hide();return}const e=this.show.bind(this),s=this.hide.bind(this);this.j.zc(t,e,s)}show(t){var e,s,i;this.nn(),window.cancelAnimationFrame(this.Bc),this.Bc=-1,(e=this.Ia)==null||e.call(this),this.Ia=null,this.Ac=window.setTimeout(()=>{this.Ac=-1;const a=this.j.u();a&&a.style.removeProperty("display"),d(()=>this.j.B(!0,t))},((i=(s=this.j).yf)==null?void 0:i.call(s))??0)}hide(t){this.nn(),d(()=>this.j.B(!1,t)),this.Bc=requestAnimationFrame(()=>{var s;this.nn(),this.Bc=-1;const e=this.j.u();if(e){const i=()=>{e.style.display="none",this.Ia=null};if(Ui(e)){(s=this.Ia)==null||s.call(this);const r=p(e,"animationend",i,{once:!0});this.Ia=r}else i()}})}nn(){window.clearTimeout(this.Ac),this.Ac=-1}}const Ot=dt();let hr=0;const De=class De extends g{constructor(){super(),this.ca=`media-tooltip-${++hr}`,this.C=v(null),this.u=v(null),new X;const{showDelay:t}=this.$props;new vi({C:this.C,u:this.u,yf:t,zc(e,s,i){p(e,"touchstart",a=>a.preventDefault(),{passive:!1}),l(()=>{It()&&p(e,"focus",s),p(e,"blur",i)}),p(e,"mouseenter",s),p(e,"mouseleave",i)},B:this.ei.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){Q(Ot,{C:this.C,u:this.u,Jd:this.Jd.bind(this),Kd:this.Kd.bind(this),Ld:this.Ld.bind(this),Md:this.Md.bind(this)})}Jd(t){var s;this.C.set(t);let e=t.getAttribute("data-media-tooltip");e&&((s=this.el)==null||s.setAttribute(`data-media-${e}-tooltip`,"")),T(t,"data-describedby",this.ca)}Kd(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.C.set(null)}Ld(t){t.setAttribute("id",this.ca),t.style.display="none",P(t,"role","tooltip"),this.u.set(t)}Md(t){t.removeAttribute("id"),t.removeAttribute("role"),this.u.set(null)}ei(t){const e=this.C(),s=this.u();e&&T(e,"aria-describedby",t?this.ca:null);for(const i of[this.el,e,s])i&&T(i,"data-visible",t)}};De.props={showDelay:700};let _s=De;const Ie=class Ie extends g{constructor(){super(),new X;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.Ja(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.Ja(t);const e=q(Ot);x(()=>e.Md(t)),x(oe(()=>{this.connectScope&&l(this.Nd.bind(this))}))}Ja(t){q(Ot).Ld(t)}Nd(){const{placement:t,offset:e,alignOffset:s}=this.$props;return ui(this.el,this.fi(),t(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:e()})}fi(){return q(Ot).C()}};Ie.props={placement:"top center",offset:0,alignOffset:0};let Fs=Ie;const Re=class Re extends W{constructor(t){super(),this.j=t,new X,t.kb&&new Fa(t.kb)}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.j.n,"aria-pressed":this.gi.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){P(t,"tabindex","0"),P(t,"role","button"),P(t,"type","button")}onConnect(t){tt(t,this.hi.bind(this));for(const e of["click","touchstart"])this.listen(e,this.ii.bind(this))}gi(){return qt(this.j.n())}ji(t){Oi(this.j.n)&&this.j.n.set(e=>!e)}hi(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.j.v??this.ji).call(this,t)}ii(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}};Re.props={disabled:!1};let j=Re;var or=Object.defineProperty,lr=Object.getOwnPropertyDescriptor,cr=(n,t,e,s)=>{for(var i=s>1?void 0:s?lr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&or(t,e,i),i};const _e=class _e extends g{constructor(){super(),this.zf=v(!1),new j({n:this.zf})}get pressed(){return this.zf()}};_e.props={disabled:!1,defaultPressed:!1};let me=_e;cr([y],me.prototype,"pressed",1);function ur(n){return n?"true":"false"}function _(n){return()=>ur(n())}const Fe=class Fe extends g{constructor(){super(),new j({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=k();const{canAirPlay:t,isAirPlayConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":_(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),st(t,this.zl.bind(this))}v(t){this.a.remote.requestAirPlay(t)}n(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="airplay"&&e()!=="disconnected"}ki(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="airplay"&&e()}zl(){const{remotePlaybackState:t}=this.a.$state;return`AirPlay ${t()}`}};Fe.props=j.props;let Ns=Fe;const Ne=class Ne extends g{constructor(){super(),new j({n:this.n.bind(this),v:this.v.bind(this)})}onSetup(){this.a=k();const{canGoogleCast:t,isGoogleCastConnected:e}=this.a.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.ki.bind(this),"aria-hidden":_(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),st(t,this.zl.bind(this))}v(t){this.a.remote.requestGoogleCast(t)}n(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="google-cast"&&e()!=="disconnected"}ki(){const{remotePlaybackType:t,remotePlaybackState:e}=this.a.$state;return t()==="google-cast"&&e()}zl(){const{remotePlaybackState:t}=this.a.$state;return`Google Cast ${t()}`}};Ne.props=j.props;let Vs=Ne;const Ve=class Ve extends g{constructor(){super(),new j({n:this.n.bind(this),kb:"togglePaused",v:this.v.bind(this)})}onSetup(){this.a=k();const{paused:t,ended:e}=this.a.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),st(t,this.zl.bind(this))}v(t){const e=this.a.remote;this.n()?e.pause(t):e.play(t)}n(){const{paused:t}=this.a.$state;return!t()}zl(){const{paused:t}=this.a.$state;return t()?"Play":"Pause"}};Ve.props=j.props;let Hs=Ve;const He=class He extends g{constructor(){super(),new j({n:this.n.bind(this),kb:"toggleCaptions",v:this.v.bind(this)})}onSetup(){this.a=k(),this.setAttributes({"data-active":this.n.bind(this),"data-supported":()=>!this.lb(),"aria-hidden":_(this.lb.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),st(t,this.zl.bind(this))}v(t){this.a.remote.toggleCaptions(t)}n(){const{textTrack:t}=this.a.$state,e=t();return!!e&&D(e)}lb(){const{hasCaptions:t}=this.a.$state;return!t()}zl(){const{textTrack:t}=this.a.$state;return t()?"Closed-Captions Off":"Closed-Captions On"}};He.props=j.props;let Ks=He;const Ke=class Ke extends g{constructor(){super(),new j({n:this.n.bind(this),kb:"toggleFullscreen",v:this.v.bind(this)})}onSetup(){this.a=k();const{fullscreen:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":_(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),st(t,this.zl.bind(this))}v(t){const e=this.a.remote,s=this.$props.target();this.n()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}n(){const{fullscreen:t}=this.a.$state;return t()}Nb(){const{canFullscreen:t}=this.a.$state;return t()}zl(){const{fullscreen:t}=this.a.$state;return t()?"Exit Fullscreen":"Enter Fullscreen"}};Ke.props={...j.props,target:"prefer-media"};let Us=Ke;const Ue=class Ue extends g{constructor(){super(),new j({n:this.n.bind(this),kb:"toggleMuted",v:this.v.bind(this)})}onSetup(){this.a=k(),this.setAttributes({"data-muted":this.n.bind(this),"data-state":this.ki.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),st(t,this.zl.bind(this))}v(t){const e=this.a.remote;this.n()?e.unmute(t):e.mute(t)}n(){const{muted:t,volume:e}=this.a.$state;return t()||e()===0}zl(){return this.n()?"Unmute":"Mute"}ki(){const{muted:t,volume:e}=this.a.$state,s=e();if(t()||s===0)return"muted";if(s>=.5)return"high";if(s<.5)return"low"}};Ue.props=j.props;let zs=Ue;const ze=class ze extends g{constructor(){super(),new j({n:this.n.bind(this),kb:"togglePictureInPicture",v:this.v.bind(this)})}onSetup(){this.a=k();const{pictureInPicture:t}=this.a.$state,e=this.Nb.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":_(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),st(t,this.zl.bind(this))}v(t){const e=this.a.remote;this.n()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}n(){const{pictureInPicture:t}=this.a.$state;return t()}Nb(){const{canPictureInPicture:t}=this.a.$state;return t()}zl(){const{pictureInPicture:t}=this.a.$state;return t()?"Exit Picture In Picture":"Enter Picture In Picture"}};ze.props=j.props;let Qs=ze;const Qe=class Qe extends g{constructor(){super(),new X}onSetup(){this.a=k();const{seeking:t}=this.a.$state,{seconds:e}=this.$props,s=this.Nb.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":_(()=>!s())})}onAttach(t){P(t,"tabindex","0"),P(t,"role","button"),P(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),st(t,this.zl.bind(this))}onConnect(t){tt(t,this.v.bind(this))}Nb(){const{canSeek:t}=this.a.$state;return t()}zl(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}v(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:i}=this.a.$state,a=i()+e();this.a.remote.seek(a,t)}};Qe.props={disabled:!1,seconds:30};let Ws=Qe;const We=class We extends g{constructor(){super(),new X}onSetup(){this.a=k();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.a.$state,i=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":i,"aria-disabled":_(()=>t()||s()),"aria-hidden":_(i)})}onAttach(t){P(t,"tabindex","0"),P(t,"role","button"),P(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){tt(t,this.v.bind(this))}v(t){const{disabled:e}=this.$props,{liveEdge:s}=this.a.$state;e()||s()||this.a.remote.seekToLiveEdge(t)}};We.props={disabled:!1};let Js=We;const Se=new nt({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Xs(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Xs(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Xs(n,t,e){const s=t-n,i=e-n;return s>0?i/s:0}function dr(n,t,e,s){return Pe(n,I(e,ya(s)),t)}function pr(n,t,e,s){const i=Pe(0,e,1),a=t-n,r=a*i,h=r/s,o=s*h;return n+o}const Bs={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class fr extends W{constructor(t,e){super(),this.j=t,this.a=e,this.i=null,this.ua=null,this.mb=null,this.ti=xt(s=>{this.va(this.Dc(s),s)},20,{leading:!0})}onConnect(){var t;if(l(this.li.bind(this)),l(this.mi.bind(this)),this.j.ni){const e=(t=this.a.player.el)==null?void 0:t.querySelector("media-provider,[data-media-provider]");e&&(this.i=e,p(e,"touchstart",this.oi.bind(this),{passive:!0}),p(e,"touchmove",this.pi.bind(this),{passive:!1}))}}oi(t){this.ua=t.touches[0]}pi(t){if(rt(this.ua)||we(t))return;const e=t.touches[0],s=e.clientX-this.ua.clientX,i=e.clientY-this.ua.clientY,a=this.$state.dragging();!a&&Math.abs(i)>20||a||Math.abs(s)>20&&(this.ua=e,this.mb=this.$state.value(),this.Od(this.mb,t))}li(){this.j.K()||(this.listen("focus",this.Lb.bind(this)),this.listen("pointerenter",this.Cd.bind(this)),this.listen("pointermove",this.qi.bind(this)),this.listen("pointerleave",this.Dd.bind(this)),this.listen("pointerdown",this.ri.bind(this)),this.listen("keydown",this.Ab.bind(this)),this.listen("keyup",this.zb.bind(this)))}mi(){this.j.K()||!this.$state.dragging()||(p(document,"pointerup",this.si.bind(this)),p(document,"pointermove",this.ti.bind(this)),zi&&p(document,"touchmove",this.ui.bind(this),{passive:!1}))}Lb(){this.va(this.$state.value())}Pd(t,e){var c,u,f,m;const{value:s,min:i,max:a,dragging:r}=this.$state,h=Math.max(i(),Math.min(t,a()));s.set(h);const o=this.createEvent("value-change",{detail:h,trigger:e});if(this.dispatch(o),(u=(c=this.j).o)==null||u.call(c,o),r()){const b=this.createEvent("drag-value-change",{detail:h,trigger:e});this.dispatch(b),(m=(f=this.j).nb)==null||m.call(f,b)}}va(t,e){const{pointerValue:s,dragging:i}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),i()&&this.Pd(t,e)}Dc(t){let e,s=this.el.getBoundingClientRect(),{min:i,max:a}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:r,height:h}=s;e=(r-t.clientY)/h}else if(this.ua&&U(this.mb)){const{width:r}=this.i.getBoundingClientRect(),h=(t.clientX-this.ua.clientX)/r,o=a()-i(),c=o*Math.abs(h);e=(h<0?this.mb-c:this.mb+c)/o}else{const{left:r,width:h}=s;e=(t.clientX-r)/h}return Math.max(i(),Math.min(a(),this.j.Ob(pr(i(),a(),e,this.j.Ka()))))}Cd(t){this.$state.pointing.set(!0)}qi(t){const{dragging:e}=this.$state;e()||this.va(this.Dc(t),t)}Dd(t){this.$state.pointing.set(!1)}ri(t){if(t.button!==0)return;const e=this.Dc(t);this.Od(e,t),this.va(e,t)}Od(t,e){var a,r;const{dragging:s}=this.$state;if(s())return;s.set(!0),this.a.remote.pauseControls(e);const i=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(i),(r=(a=this.j).Qd)==null||r.call(a,i)}Af(t,e){var a,r;const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.a.remote.resumeControls(e);const i=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(i),(r=(a=this.j).Ec)==null||r.call(a,i),this.ua=null,this.mb=null}Ab(t){const{key:e}=t,{min:s,max:i}=this.$state;let a;if(e==="Home"||e==="PageUp"?a=s():e==="End"||e==="PageDown"?a=i():!t.metaKey&&/[0-9]/.test(e)&&(a=(i()-s())/10*Number(e)),!bt(a)){this.va(a,t),this.Pd(a,t);return}const r=this.Bf(t);if(bt(r))return;const h=e===this.Rd;!this.$state.dragging()&&h&&this.Od(r,t),this.va(r,t),h||this.Pd(r,t),this.Rd=e}zb(t){this.Rd="";const{dragging:e,value:s}=this.$state;if(!e())return;const i=this.Bf(t)??s();this.va(i),this.Af(i,t)}Bf(t){const{key:e,shiftKey:s}=t;if(!Object.keys(Bs).includes(e))return;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:a}=this.$props,{value:r,min:h,max:o}=this.$state,c=this.j.Ka(),u=this.j.Pb(),f=s?u*a():u,m=Number(Bs[e]),b=f*m,C=(r()+b)/c;return Math.max(h(),Math.min(o(),Number((c*C).toFixed(3))))}si(t){if(t.button!==0)return;const e=this.Dc(t);this.va(e,t),this.Af(e,t)}ui(t){t.preventDefault()}}const gt=dt(()=>({})),Ee=dt(),Je=class Je extends W{constructor(t){super(),this.j=t,this.xi=ut((e,s)=>{var i,a;(i=this.el)==null||i.style.setProperty("--slider-fill",e+"%"),(a=this.el)==null||a.style.setProperty("--slider-pointer",s+"%")})}onSetup(){this.a=k();const t=new X;t.attach(this),this.$state.focused=t.focused.bind(t),J(gt)||Q(gt,{default:"value"}),Q(Ee,{ta:this.$props.orientation,Fc:this.j.K,Cf:v(null)}),l(this.D.bind(this)),l(this.Qb.bind(this)),this.vi(),new fr(this.j,this.a).attach(this)}onAttach(t){P(t,"role","slider"),P(t,"tabindex","0"),P(t,"autocomplete","off"),l(this.Df.bind(this))}D(){const{dragging:t,value:e,min:s,max:i}=this.$state;d(t)||e.set(dr(s(),i(),e(),this.j.Ka()))}Qb(){if(!this.j.K())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}wi(){return qt(this.j.K())}vi(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:i}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":i,"data-active":s,"aria-disabled":this.wi.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.j.ia,"aria-valuetext":this.j.ja,"aria-orientation":t})}Df(){const{fillPercent:t,pointerPercent:e}=this.$state;this.xi(I(t(),3),I(e(),3))}};Je.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};let et=Je;const Vt=class Vt extends g{constructor(){super(),new et({Ka:this.$props.step,Pb:this.$props.keyStep,Ob:Math.round,K:this.$props.disabled,ia:this.ia.bind(this),ja:this.ja.bind(this)})}onSetup(){l(this.D.bind(this)),l(this.yi.bind(this))}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return I(t()/e()*100,2)+"%"}D(){const{value:t}=this.$props;this.$state.value.set(t())}yi(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}};Vt.props={...et.props,min:0,max:100,value:0},Vt.state=Se;let yt=Vt;const Y=new Map,Ct=new Map;class Ae{constructor(t,e,s){this.$src=t,this.$crossOrigin=e,this.a=s,this.$images=v([]),l(this.zi.bind(this))}static create(t,e){const s=k();return new Ae(t,e,s)}zi(){var i;const{canLoad:t}=this.a.$state;if(!t())return;const e=this.$src(),s=new AbortController;if(e){if(w(e)&&Y.has(e)){const a=Y.get(e);if(Y.delete(e),Y.set(e,a),Y.size>30){const r=Y.keys().next().value;Y.delete(r)}this.$images.set(Y.get(e))}else if(w(e)){const a=this.$crossOrigin(),r=e+"::"+a;if(!Ct.has(r)){const h=new Promise(async(o,c)=>{try{const u=await fetch(e,{signal:s.signal,credentials:Mt(a)});if(u.headers.get("content-type")==="application/json"){const m=await u.json();if(N(m))if(m[0]&&"text"in m)o(this.bl(m));else{for(let b=0;b<m.length;b++){const C=m[b];B(Qi(C),!1),B("url"in C&&w(C.url),!1),B("startTime"in C&&U(C.startTime),!1)}o(m)}else o(this.cl(m));return}K(()=>import("./prod-JgeY5li1.js").then(m=>m.d),__vite__mapDeps([0,1])).then(async({parseResponse:m})=>{try{const{cues:b}=await m(u);o(this.bl(b))}catch(b){c(b)}})}catch(u){c(u)}}).then(o=>(s.signal.aborted||Y.set(r,o),o)).catch(o=>{s.signal.aborted||this.U(e,o)}).finally(()=>{w(r)&&Ct.delete(r)});Ct.set(r,h)}(i=Ct.get(r))==null||i.then(h=>{s.signal.aborted||this.$images.set(h||[])})}else if(N(e))try{this.$images.set(this.jl(e))}catch(a){this.U(e,a)}else try{this.$images.set(this.cl(e))}catch(a){this.U(e,a)}return()=>{s.abort(),this.$images.set([])}}}jl(t){const e=this.dl();return t.map((s,i)=>(B(s.url&&w(s.url),!1),B("startTime"in s&&U(s.startTime),!1),{...s,url:w(s.url)?this.gl(s.url,e):s.url}))}cl(t){var r;B(w(t.url),!1),B(N(t.tiles)&&((r=t.tiles)==null?void 0:r.length),!1);const e=new URL(t.url),s=[],i="tile_width"in t?t.tile_width:t.tileWidth,a="tile_height"in t?t.tile_height:t.tileHeight;for(const h of t.tiles)s.push({url:e,startTime:"start"in h?h.start:h.startTime,width:i,height:a,coords:{x:h.x,y:h.y}});return s}bl(t){for(let i=0;i<t.length;i++){const a=t[i];B("startTime"in a&&U(a.startTime),!1),B("text"in a&&w(a.text),!1)}const e=[],s=this.dl();for(const i of t){const[a,r]=i.text.split("#"),h=this.fl(r);e.push({url:this.gl(a,s),startTime:i.startTime,endTime:i.endTime,width:h==null?void 0:h.w,height:h==null?void 0:h.h,coords:h&&U(h.x)&&U(h.y)?{x:h.x,y:h.y}:void 0})}return e}dl(){let t=d(this.$src);return!w(t)||!/^https?:/.test(t)?location.href:t}gl(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}fl(t){if(!t)return{};const[e,s]=t.split("="),i=s==null?void 0:s.split(","),a={};if(!e||!i)return null;for(let r=0;r<e.length;r++){const h=+i[r];isNaN(h)||(a[e[r]]=h)}return a}U(t,e){}}const Ht=class Ht extends g{constructor(){super(...arguments),this.Td=[]}onSetup(){this.a=k(),this.ha=Ae.create(this.$props.src,this.$state.crossOrigin),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":_(this.$state.hidden)})}onConnect(t){l(this.Ud.bind(this)),l(this.ob.bind(this)),l(this.Hh.bind(this)),l(this.Ea.bind(this)),l(this.il.bind(this)),l(this.Fi.bind(this))}Ud(){const t=this.$state.img();t&&(p(t,"load",this.qd.bind(this)),p(t,"error",this.U.bind(this)))}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=t()!==null?t():s();e.set(i===!0?"anonymous":i)}Ea(){const{src:t,loading:e,error:s}=this.$state;return t()&&(e.set(!0),s.set(null)),()=>{this.Ci(),e.set(!1),s.set(null)}}qd(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}wa(){const{error:t}=this.$state;return!rt(t())}ob(){const{hidden:t}=this.$state,{duration:e}=this.a.$state,s=this.ha.$images();t.set(this.wa()||!Number.isFinite(e())||s.length===0)}Gf(){return this.$props.time()}il(){let t=this.Gf(),{src:e,activeThumbnail:s}=this.$state,i=this.ha.$images(),a=-1,r=null;for(let h=i.length-1;h>=0;h--){const o=i[h];if(t>=o.startTime&&(!o.endTime||t<o.endTime)){a=h;break}}i[a]&&(r=i[a]),s.set(r),e.set((r==null?void 0:r.url.href)||"")}Fi(){if(!this.scope)return;const t=this.el,e=this.$state.img(),s=this.$state.loading(),i=this.$state.activeThumbnail();if(!e||!i||!t||s)return;let a=i.width??e.naturalWidth,r=(i==null?void 0:i.height)??e.naturalHeight,{maxWidth:h,maxHeight:o,minWidth:c,minHeight:u,width:f,height:m}=getComputedStyle(this.el);c==="100%"&&(c=parseFloat(f)+""),u==="100%"&&(u=parseFloat(m)+"");let b=Math.max(parseInt(c)/a,parseInt(u)/r),C=Math.min(Math.max(parseInt(c),parseInt(h))/a,Math.max(parseInt(u),parseInt(o))/r),V=!isNaN(C)&&C<1?C:b>1?b:1;this.pb(t,"--thumbnail-width",`${a*V}px`),this.pb(t,"--thumbnail-height",`${r*V}px`),this.pb(e,"width",`${e.naturalWidth*V}px`),this.pb(e,"height",`${e.naturalHeight*V}px`),this.pb(e,"transform",i.coords?`translate(-${i.coords.x*V}px, -${i.coords.y*V}px)`:""),this.pb(e,"max-width","none")}pb(t,e,s){t.style.setProperty(e,s),this.Td.push(()=>t.style.removeProperty(e))}Ci(){for(const t of this.Td)t();this.Td=[]}};Ht.props={src:null,time:0,crossOrigin:null},Ht.state=new nt({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});let Ys=Ht;var mr=Object.defineProperty,br=Object.getOwnPropertyDescriptor,gr=(n,t,e,s)=>{for(var i=s>1?void 0:s?br(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&mr(t,e,i),i};const Kt=class Kt extends g{get video(){return this.$state.video()}onSetup(){this.a=k(),this.Q=Jt(yt.state),this.Hh(),this.setAttributes({"data-loading":this.Rb.bind(this),"data-hidden":this.$state.hidden,"data-error":this.wa.bind(this),"aria-hidden":_(this.$state.hidden)})}onAttach(t){l(this.Gi.bind(this)),l(this.fd.bind(this)),l(this.Hh.bind(this)),l(this.ob.bind(this)),l(this.Hi.bind(this)),l(this.Ii.bind(this))}Gi(){const t=this.$state.video();t&&(t.readyState>=2&&this.hc(),p(t,"canplay",this.hc.bind(this)),p(t,"error",this.U.bind(this)))}fd(){const{src:t}=this.$state,{canLoad:e}=this.a.$state;t.set(e()?this.$props.src():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.a.$state,i=t()!==null?t():s();e.set(i===!0?"anonymous":i)}Rb(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}wa(){const{error:t}=this.$state;return!rt(t)}ob(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:i}=this.a.$state;e.set(s()&&(!t()||this.wa()||!Number.isFinite(i())))}Hi(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}hc(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}U(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}Ii(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.a.$state,{pointerRate:i}=this.Q,a=t();e()&&a&&Number.isFinite(s())&&Number.isFinite(i())&&(a.currentTime=i()*s())}};Kt.props={src:null,crossOrigin:null},Kt.state=new nt({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});let be=Kt;gr([y],be.prototype,"video",1);function ne(n,t){const e=String(n),s=e.length;if(s<t){const a=t-s;return`${"0".repeat(a)}${n}`}return e}function Ti(n){const t=Math.trunc(n/3600),e=Math.trunc(n%3600/60),s=Math.trunc(n%60),i=Number((n-Math.trunc(n)).toPrecision(3));return{hours:t,minutes:e,seconds:s,fraction:i}}function Yt(n,t=null,e=null,s=!1){const{hours:i,minutes:a,seconds:r}=Ti(n),h=t?ne(i,2):i,o=e||rt(e)&&n>=3600?ne(a,2):a,c=ne(r,2);return i>0||s?`${h}:${o}:${c}`:`${o}:${c}`}function ge(n){const t=[],{hours:e,minutes:s,seconds:i}=Ti(n);return e>0&&t.push(`${e} hour`),s>0&&t.push(`${s} min`),(i>0||t.length===0)&&t.push(`${i} sec`),t.join(" ")}var yr=Object.defineProperty,$r=Object.getOwnPropertyDescriptor,vr=(n,t,e,s)=>{for(var i=s>1?void 0:s?$r(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&yr(t,e,i),i};const Xe=class Xe extends g{onSetup(){this.Q=Jt(yt.state),this.Sb=q(gt),this.Ji=lt(this.getValueText.bind(this))}getValueText(){var b,C;const{type:t,format:e,decimalPlaces:s,padHours:i,padMinutes:a,showHours:r}=this.$props,{value:h,pointerValue:o,min:c,max:u}=this.Q,f=e()??this.Sb.default,m=t()==="current"?h():o();if(f==="percent"){const V=u()-c(),Zt=m/V*100;return(this.Sb.percent??I)(Zt,s())+"﹪"}else return f==="time"?(this.Sb.time??Yt)(m,i(),a(),r()):((C=(b=this.Sb).value)==null?void 0:C.call(b,m))??m.toFixed(2)}};Xe.props={type:"pointer",format:null,showHours:!1,padHours:null,padMinutes:null,decimalPlaces:2};let ye=Xe;vr([L],ye.prototype,"getValueText",1);const Be=class Be extends g{constructor(){super(...arguments),this.Hf=ut(()=>{const{Fc:t,ta:e}=this.Q;if(t())return;const s=this.el,{offset:i,noClamp:a}=this.$props;Tr(s,{clamp:!a(),offset:i(),orientation:e()})})}onSetup(){this.Q=q(Ee);const{active:t}=Jt(yt.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{Cf:e}=this.Q;e.set(t),x(()=>e.set(null)),l(this.Hf.bind(this));const s=new ResizeObserver(this.Hf.bind(this));s.observe(t),x(()=>s.disconnect())}};Be.props={offset:0,noClamp:!1};let Gs=Be;function Tr(n,{clamp:t,offset:e,orientation:s}){const i=getComputedStyle(n),a=parseFloat(i.width),r=parseFloat(i.height),h={top:null,right:null,bottom:null,left:null};if(h[s==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,s==="horizontal"){const o=a/2;if(!t)h.left=`calc(var(--slider-pointer) - ${o}px)`;else{const c=`max(0px, calc(var(--slider-pointer) - ${o}px))`,u=`calc(100% - ${a}px)`;h.left=`min(${c}, ${u})`}}else{const o=r/2;if(!t)h.bottom=`calc(var(--slider-pointer) - ${o}px)`;else{const c=`max(${o}px, calc(var(--slider-pointer) - ${o}px))`,u=`calc(100% - ${r}px)`;h.bottom=`min(${c}, ${u})`}}Object.assign(n.style,h)}const Ut=class Ut extends g{constructor(){super(...arguments),this.If=xt(this.ab.bind(this),25)}onSetup(){this.a=k(),Q(gt,{default:"percent"}),new et({Ka:this.$props.step,Pb:this.$props.keyStep,K:this.$props.disabled,Ob:Math.round,ia:this.ia.bind(this),ja:this.ja.bind(this),nb:this.nb.bind(this),o:this.o.bind(this)}).attach(this),l(this.Fd.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),P(t,"aria-label","Volume");const{canSetVolume:e}=this.a.$state;this.setAttributes({"data-supported":e,"aria-hidden":_(()=>!e())})}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const{value:t,max:e}=this.$state;return I(t()/e()*100,2)+"%"}Fd(){const{muted:t,volume:e}=this.a.$state,s=t()?0:e()*100;this.$state.value.set(s),this.dispatch("value-change",{detail:s})}ab(t){if(!t.trigger)return;const e=I(t.detail/100,3);this.a.remote.changeVolume(e,t)}o(t){this.If(t)}nb(t){this.If(t)}};Ut.props={...et.props,keyStep:5,shiftKeyMultiplier:2},Ut.state=Se;let Zs=Ut;const zt=class zt extends g{constructor(){super(),this.Jf=v(null),this.Wd=!1,new et({ni:!0,Ka:this.Ka.bind(this),Pb:this.Pb.bind(this),K:this.K.bind(this),Ob:this.Ob,ia:this.ia.bind(this),ja:this.ja.bind(this),Qd:this.Qd.bind(this),nb:this.nb.bind(this),Ec:this.Ec.bind(this),o:this.o.bind(this)})}onSetup(){this.a=k(),Q(gt,{default:"time",value:this.Ki.bind(this),time:this.Li.bind(this)}),this.setAttributes({"data-chapters":this.Mi.bind(this)}),this.setStyles({"--slider-progress":this.Ni.bind(this)}),l(this.jb.bind(this)),l(this.Oi.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),P(t,"aria-label","Seek")}onConnect(t){l(this.Pi.bind(this)),Bt(this.a.textTracks,"chapters",this.Jf.set)}Ni(){const{bufferedEnd:t,duration:e}=this.a.$state;return I(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}Mi(){var e;const{duration:t}=this.a.$state;return((e=this.Jf())==null?void 0:e.cues.length)&&Number.isFinite(t())&&t()>0}Oi(){this.Vd=xt(this.qa.bind(this),this.$props.seekingRequestThrottle())}jb(){const{currentTime:t}=this.a.$state,{value:e,dragging:s}=this.$state,i=this.Qi(t());d(s)||(e.set(i),this.dispatch("value-change",{detail:i}))}Pi(){const t=this.a.player.el,{Cf:e}=q(Ee);t&&e()&&T(t,"data-preview",this.$state.active())}qa(t,e){this.a.remote.seeking(t,e)}Ri(t,e,s){this.Vd.cancel();const{live:i}=this.a.$state;if(i()&&e>=99){this.a.remote.seekToLiveEdge(s);return}this.a.remote.seek(t,s)}Qd(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:s}=this.a.$state;this.Wd=!s(),this.a.remote.pause(t)}}nb(t){this.Vd(this.Tb(t.detail),t)}Ec(t){const e=t.detail;this.Ri(this.Tb(e),e,t);const{pauseWhileDragging:s}=this.$props;s()&&this.Wd&&(this.a.remote.play(t),this.Wd=!1)}o(t){const{dragging:e}=this.$state;e()||!t.trigger||this.Ec(t)}Ka(){const t=this.$props.step()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Pb(){const t=this.$props.keyStep()/this.a.$state.duration()*100;return Number.isFinite(t)?t:1}Ob(t){return I(t,3)}K(){const{canSeek:t}=this.a.$state;return this.$props.disabled()||!t()}ia(){const{value:t}=this.$state;return Math.round(t())}ja(){const t=this.Tb(this.$state.value()),{duration:e}=this.a.$state;return Number.isFinite(t)?`${ge(t)} out of ${ge(e())}`:"live"}Tb(t){const{duration:e}=this.a.$state;return I(t/100*e(),5)}Qi(t){const{liveEdge:e,duration:s}=this.a.$state,i=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(i)?0:Number.isFinite(i)?i*100:100}Ki(t){const e=this.Tb(t),{live:s,duration:i}=this.a.$state;return Number.isFinite(e)?(s()?e-i():e).toFixed(0):"LIVE"}Li(t,e,s,i){const a=this.Tb(t),{live:r,duration:h}=this.a.$state,o=r()?a-h():a;return Number.isFinite(a)?`${o<0?"-":""}${Yt(Math.abs(o),e,s,i)}`:"LIVE"}};zt.props={...et.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,seekingRequestThrottle:100},zt.state=Se;let $e=zt;var kr=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Gt=(n,t,e,s)=>{for(var i=s>1?void 0:s?wr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&kr(t,e,i),i};const Ye=class Ye extends g{constructor(){super(...arguments),this.La=null,this.R=[],this.Gc=v(null),this._=v([]),this.Ub=v(-1),this.Hc=v(-1),this.Zd=0,this.Xi=ut(t=>{var h;let e,s=this._(),{clipStartTime:i}=this.a.$state,a=i(),r=this.Hk(s);for(let o=this.Zd;o<this.R.length;o++)if(e=this.ae(s[o],t,a,r),(h=this.R[o])==null||h.style.setProperty("--chapter-progress",e+"%"),e<100){this.Zd=o;break}}),this.Yi=lt(this.Zi.bind(this)),this.$i=xe(()=>{const t=d(this.Gc);!this.scope||!t||!t.cues.length||(this._.set(this._i(t.cues)),this.Ub.set(0),this.Zd=0)},150,!0)}get cues(){return this._()}get activeCue(){return this._()[this.Ub()]||null}get activePointerCue(){return this._()[this.Hc()]||null}onSetup(){this.a=k(),this.Xd=Jt($e.state)}onAttach(t){Bt(this.a.textTracks,"chapters",this.Kf.bind(this)),l(this._d.bind(this))}onConnect(){x(()=>this.H.bind(this))}onDestroy(){this.Kf(null)}setRefs(t){var e;if(this.R=t,(e=this.Yd)==null||e.dispose(),this.R.length===1){const s=this.R[0];s.style.width="100%",s.style.setProperty("--chapter-fill","var(--slider-fill)"),s.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.R.length>0&&Xt(()=>this.Si(),this.Yd=Li())}Kf(t){d(this.Gc)!==t&&(this.H(),this.Gc.set(t))}H(){var t;this.R=[],this._.set([]),this.Ub.set(-1),this.Hc.set(-1),this.Zd=0,(t=this.Yd)==null||t.dispose()}Si(){this.R.length&&(l(this.Ti.bind(this)),l(this.Ui.bind(this)),l(this.Vi.bind(this)),l(this.Wi.bind(this)))}Ti(){const t=this._();if(!t.length)return;let e,{clipStartTime:s,clipEndTime:i}=this.a.$state,a=s(),r=i()||t[t.length-1].endTime,h=r-a,o=100;for(let c=0;c<t.length;c++)if(e=t[c],this.R[c]){const u=c===t.length-1?o:I((e.endTime-Math.max(a,e.startTime))/h*100,3);this.R[c].style.width=u+"%",o-=u}}Ui(){let{liveEdge:t,ended:e,clipStartTime:s,clipEndTime:i}=this.a.$state,{fillPercent:a,value:r}=this.Xd,h=this._(),o=t(),c=d(this.Ub),u=h[c],f=o?this._.length-1:this.Lf(u&&u.startTime<=d(r)?c:0,a());o||e()||!u?this.$d(0,h.length,"100%"):f>c?this.$d(c,f,"100%"):f<c&&this.$d(f+1,c+1,"0%");const m=o?"100%":this.ae(h[f],a(),s(),this.Hk(h))+"%";this.Mf(this.R[f],m),this.Ub.set(f)}Vi(){let{pointing:t,pointerPercent:e}=this.Xd;if(!t()){this.Hc.set(-1);return}const s=this.Lf(0,e());this.Hc.set(s)}$d(t,e,s){for(let i=t;i<e;i++)this.Mf(this.R[i],s)}Mf(t,e){t&&t.style.setProperty("--chapter-fill",e)}Lf(t,e){let s=0,i=this._(),{clipStartTime:a}=this.a.$state,r=a(),h=this.Hk(i);for(let o=t;o<i.length;o++)if(s=this.ae(i[o],e,r,h),s>=0&&s<100)return o;return 0}Wi(){this.Xi(this.Yi())}Zi(){const{bufferedEnd:t,duration:e}=this.a.$state;return I(Math.min(t()/Math.max(e(),1),1),3)*100}Hk(t){var i;const{clipEndTime:e}=this.a.$state,s=e();return s>0?s:((i=t[t.length-1])==null?void 0:i.endTime)||0}ae(t,e,s,i){if(this._().length===0)return 0;const r=i-s,h=Math.max(0,t.startTime-s),o=Math.min(i,t.endTime)-s,c=h/r,u=c*100,f=Math.min(1,c+(o-h)/r)*100;return Math.max(0,I(e>=f?100:(e-u)/(f-u)*100,3))}_i(t){let e=[],{clipStartTime:s,clipEndTime:i,duration:a}=this.a.$state,r=s(),h=i()||1/0;t=t.filter(u=>u.startTime<=h&&u.endTime>=r);const o=t[0];o&&o.startTime>r&&e.push(new window.VTTCue(r,o.startTime,""));for(let u=0;u<t.length-1;u++){const f=t[u],m=t[u+1];if(e.push(f),m){const b=m.startTime-f.endTime;b>0&&e.push(new window.VTTCue(f.endTime,f.endTime+b,""))}}const c=t[t.length-1];return c&&(e.push(c),a()>=0&&(h===0||h!==1/0&&c.endTime<h)&&Math.abs(c.endTime-a())>1&&e.push(new window.VTTCue(c.endTime,a(),""))),e}_d(){if(!this.scope)return;const{disabled:t}=this.$props;if(t()){this._.set([]),this.Ub.set(0),this.Zd=0;return}const e=this.Gc();if(e){const s=this.$i.bind(this);s(),x(p(e,"add-cue",s)),x(p(e,"remove-cue",s)),l(this.Fk.bind(this))}return this.La=this.aj(),this.La&&l(this.bj.bind(this)),()=>{this.La&&(this.La.textContent="",this.La=null)}}Fk(){this.a.$state.duration(),this.$i()}bj(){const t=this.activePointerCue||this.activeCue;this.La&&(this.La.textContent=(t==null?void 0:t.text)||"")}cj(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t}aj(){const t=this.cj();return t?t.querySelector('[data-part="chapter-title"]'):null}};Ye.props={disabled:!1};let ct=Ye;Gt([y],ct.prototype,"cues",1);Gt([y],ct.prototype,"activeCue",1);Gt([y],ct.prototype,"activePointerCue",1);Gt([L],ct.prototype,"setRefs",1);const M=dt(),Pr=["a[href]","[tabindex]","input","select","button"].map(n=>`${n}:not([aria-hidden='true'])`).join(","),ti=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class xr{constructor(t){this.j=t,this.ka=0,this.xa=null,this.da=[]}get r(){return this.da}Nf(t){return p(t,"focus",this.Lb.bind(this)),this.xa=t,x(()=>{this.xa=null}),this}zc(){this.xa&&(this.ea(),p(this.xa,"keyup",this.zb.bind(this)),p(this.xa,"keydown",this.Ab.bind(this)),x(()=>{this.ka=0,this.da=[]}))}ea(){this.ka=0,this.da=this.dj()}Of(t=this.Pf()){const e=this.da[t],s=this.j.ej();e&&s&&requestAnimationFrame(()=>{s.scrollTop=e.offsetTop-s.offsetHeight/2+e.offsetHeight/2})}qb(t){var e;this.ka=t,(e=this.da[t])==null||e.focus(),this.Of(t)}Pf(){return this.da.findIndex(t=>t.getAttribute("aria-checked")==="true")}Lb(){this.ea(),setTimeout(()=>{const t=this.Pf();this.qb(t>=0?t:0)},100)}zb(t){ti.has(t.key)&&(t.stopPropagation(),t.preventDefault())}Ab(t){if(ti.has(t.key))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.j.fj(t);break;case"Tab":this.qb(this.be(t.shiftKey?-1:1));break;case"ArrowUp":this.qb(this.be(-1));break;case"ArrowDown":this.qb(this.be(1));break;case"Home":case"PageUp":this.qb(0);break;case"End":case"PageDown":this.qb(this.da.length-1);break}}be(t){var s;let e=this.ka;do e=(e+t+this.da.length)%this.da.length;while(((s=this.da[e])==null?void 0:s.offsetParent)===null);return e}dj(){if(!this.xa)return[];const t=this.xa.querySelectorAll(Pr),e=[],s=i=>i.getAttribute("role")==="menu";for(const i of t)i instanceof HTMLElement&&i.offsetParent!==null&&di(this.xa,i,s)&&e.push(i);return e}}var Sr=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,St=(n,t,e,s)=>{for(var i=s>1?void 0:s?Er(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Sr(t,e,i),i};let Ar=0;const Ge=class Ge extends g{constructor(){super(),this.L=v(!1),this.Fc=v(!1),this.C=v(null),this.u=v(null),this.Qf=v(!1),this.Vb=new Set,this.Ic=null,this.rj=this.sj.bind(this),this.pj=this.tj.bind(this),this.qj=this.uj.bind(this),this.O=ut(()=>{const e=d(this.u);if(!e)return;let s=0,i=getComputedStyle(e),a=[...e.children];for(const r of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])s+=parseFloat(i[r])||0;for(const r of a)if(r instanceof HTMLElement&&r.style.display==="contents")a.push(...r.children);else if(r.nodeType===3)s+=parseFloat(getComputedStyle(r).fontSize);else if(r instanceof HTMLElement){const h=getComputedStyle(r);if(h.display==="none")continue;s+=r.offsetHeight+(parseFloat(h.marginTop)||0)+(parseFloat(h.marginBottom)||0)}requestAnimationFrame(()=>{z(e,"--menu-height",s+"px")})});const{showDelay:t}=this.$props;this.Jc=new vi({C:this.C,u:this.u,yf:t,zc:(e,s,i)=>{tt(e,r=>{this.L()?i(r):s(r)});const a=this.gj();a&&tt(a,r=>{r.stopPropagation(),i(r)})},B:this.hj.bind(this)})}get triggerElement(){return this.C()}get contentElement(){return this.u()}get isSubmenu(){return!!this.ee}onSetup(){this.a=k();const t=++Ar;this.ce=`media-menu-${t}`,this.de=`media-menu-button-${t}`,this.rb=new xr({ej:this.ij.bind(this),fj:this.close.bind(this)}),J(M)&&(this.ee=q(M)),this.setAttributes({"data-open":this.L,"data-submenu":this.isSubmenu,"data-disabled":this.K.bind(this)}),Q(M,{jj:this.C,L:this.L,Wb:v(""),Ma:this.Ma.bind(this),fe:this.fe.bind(this),ge:this.ge.bind(this),he:this.he.bind(this),ie:this.ie.bind(this),je:this.je.bind(this)})}onAttach(t){t.style.setProperty("display","contents"),this.rb.Nf(t)}onConnect(t){var e;l(this.kj.bind(this)),this.isSubmenu&&((e=this.ee)==null||e.je(this))}onDestroy(){this.C.set(null),this.u.set(null),this.Ic=null}kj(){const t=this.lj();this.isSubmenu||this.O(),this.Rf(t),t&&(l(()=>{const{height:e}=this.a.$state,s=this.u();s&&z(s,"--player-height",e()+"px")}),this.rb.zc(),this.listen("pointerup",this.mj.bind(this)),p(window,"pointerup",this.nj.bind(this)))}fe(t){const e=t.el,s=this.isSubmenu,i=_(this.K.bind(this));P(e,"tabindex",s?"-1":"0"),P(e,"role",s?"menuitem":"button"),T(e,"id",this.de),T(e,"aria-haspopup","menu"),T(e,"aria-expanded","false"),T(e,"data-submenu",this.isSubmenu),this.isSubmenu||this.Sf(e),l(()=>{T(e,"data-open",this.L()),T(e,"aria-disabled",i())}),this.C.set(e),x(()=>{this.C.set(null)})}ge(t){const e=t.el;if(e.style.setProperty("display","none"),T(e,"id",this.ce),P(e,"role","menu"),P(e,"tabindex","-1"),T(e,"data-submenu",this.isSubmenu),this.u.set(e),x(()=>this.u.set(null)),l(()=>T(e,"data-open",this.L())),this.rb.Nf(e),this.Rf(!1),!this.isSubmenu){const i=this.Xm.bind(this);t.listen("transitionstart",i),t.listen("transitionend",i),t.listen("vds-menu-resize",this.O)}}he(t){this.Ic=t}Sf(t){p(t,"click",e=>e.stopPropagation()),p(t,"pointerup",e=>e.stopPropagation())}Rf(t){const e=d(this.u);e&&T(e,"aria-hidden",qt(!t))}ie(t){this.Qf.set(t)}hj(t,e){var a,r,h,o,c,u;if(e==null||e.stopPropagation(),this.L()===t)return;if(this.K()){t&&this.Jc.hide(e);return}(a=this.el)==null||a.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const s=this.C(),i=this.u();if(s&&(T(s,"aria-controls",t&&this.ce),T(s,"aria-expanded",qt(t))),i&&T(i,"aria-labelledby",t&&this.de),this.L.set(t),this.oj(e),Z(),le(e)){t?i==null||i.focus():s==null||s.focus();for(const f of[this.el,i])f&&f.setAttribute("data-keyboard","")}else for(const f of[this.el,i])f&&f.removeAttribute("data-keyboard");this.dispatch(t?"open":"close",{trigger:e}),t?(!this.isSubmenu&&this.a.activeMenu!==this&&((r=this.a.activeMenu)==null||r.close(e),this.a.activeMenu=this),(o=(h=this.Ic)==null?void 0:h.ke)==null||o.call(h,e)):(this.isSubmenu?setTimeout(()=>{for(const f of this.Vb)f.close(e)},300):this.a.activeMenu=null,(u=(c=this.Ic)==null?void 0:c.Tj)==null||u.call(c,e)),t&&!le(e)&&requestAnimationFrame(()=>{this.rb.ea(),setTimeout(()=>{this.rb.Of()},100)})}lj(){return!this.K()&&this.L()}K(){return this.Fc()||this.Qf()}Ma(t){this.Fc.set(t)}mj(t){t.stopPropagation()}nj(t){var s;if(!(!(t.target instanceof Node)||(s=this.u())!=null&&s.contains(t.target))){if(this.isSubmenu)return setTimeout(this.close.bind(this,t),800);this.close(t)}}gj(){var e;const t=(e=this.el)==null?void 0:e.querySelector('[data-part="close-target"]');return this.el&&t&&di(this.el,t,s=>s.getAttribute("role")==="menu")?t:null}ij(){if(this.isSubmenu){let t=this.el;for(;t&&t.tagName!=="media-menu"&&t.hasAttribute("data-submenu");)t=t.parentNode;return t}else return d(this.u)||null}oj(t){this.isSubmenu||(this.L()?this.a.remote.pauseControls(t):this.a.remote.resumeControls(t))}je(t){this.Vb.add(t),p(t,"open",this.pj),p(t,"close",this.qj),x(this.rj)}sj(t){this.Vb.delete(t)}tj(t){var e;this.isSubmenu&&((e=this.triggerElement)==null||e.setAttribute("aria-hidden","true"));for(const s of this.Vb)if(s!==t.target)for(const i of[s.el,s.triggerElement])i==null||i.setAttribute("aria-hidden","true")}uj(){var t;this.isSubmenu&&((t=this.triggerElement)==null||t.setAttribute("aria-hidden","false"));for(const e of this.Vb)for(const s of[e.el,e.triggerElement])s==null||s.setAttribute("aria-hidden","false")}Xm(t){const e=this.u();if(e&&t.propertyName==="height"){const s=t.type==="transitionstart";T(e,"data-resizing",s)}}open(t){d(this.L)||(this.Jc.show(t),Z())}close(t){d(this.L)&&(this.Jc.hide(t),Z())}};Ge.props={showDelay:0};let at=Ge;St([y],at.prototype,"triggerElement",1);St([y],at.prototype,"contentElement",1);St([y],at.prototype,"isSubmenu",1);St([L],at.prototype,"open",1);St([L],at.prototype,"close",1);var Cr=Object.defineProperty,Or=Object.getOwnPropertyDescriptor,Lr=(n,t,e,s)=>{for(var i=s>1?void 0:s?Or(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Cr(t,e,i),i};const Ze=class Ze extends g{get expanded(){var t;return((t=this.l)==null?void 0:t.L())??!1}constructor(){super(),new X}onSetup(){this.l=q(M)}onAttach(t){this.l.fe(this),l(this.Qb.bind(this)),P(t,"type","button")}onConnect(t){const e=Array.from(t.querySelectorAll('[data-part="hint"]')).pop();e&&l(()=>{const s=this.l.Wb();s&&(e.textContent=s)}),tt(t,s=>{this.dispatch("select",{trigger:s})})}Qb(){this.l.ie(this.$props.disabled())}};Ze.props={disabled:!1};let ve=Ze;Lr([y],ve.prototype,"expanded",1);const ts=class ts extends g{constructor(){super(...arguments),this.A=null}onSetup(){this.a=k(),Q(Lt,{Ja:this.vj.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){var t;(t=this.A)==null||t.remove(),this.A=null}vj(t){this.Tf(!1),this.A=t,oe(()=>{oe(()=>{this.connectScope&&l(this.Qb.bind(this))})})}Qb(){const{fullscreen:t}=this.a.$state,{disabled:e}=this.$props,s=e();this.Tf(s==="fullscreen"?!t():!s)}Tf(t){var i;if(!this.A)return;let e=this.wj(this.$props.container());if(!e)return;const s=this.A.parentElement===e;T(this.A,"data-portal",t),t?s||(this.A.remove(),e.append(this.A)):s&&this.A.parentElement===e&&(this.A.remove(),(i=this.el)==null||i.append(this.A))}wj(t){return t instanceof HTMLElement?t:t?document.querySelector(t):document.body}};ts.props={container:null,disabled:!1};let ei=ts;const Lt=dt(),es=class es extends g{constructor(){super(),new X;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.l=q(M),this.l.ge(this),J(Lt)){const e=q(Lt);e&&(Q(Lt,null),e.Ja(t),x(()=>e.Ja(null)))}}onConnect(t){l(this.Nd.bind(this))}Nd(){if(!this.el)return;const t=this.$props.placement();if(t){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:e,alignOffset:s}=this.$props;return ui(this.el,this.Cc(),t,{offsetVarName:"media-menu",xOffset:s(),yOffset:e()})}else this.el.removeAttribute("style"),this.el.style.display="none"}Cc(){return this.l.jj()}};es.props={placement:null,offset:0,alignOffset:0};let si=es;const Te=dt();class pt extends W{constructor(){super(...arguments),this.sb=new Set,this.la=v(""),this.d=null,this.Aj=this.B.bind(this)}get xj(){return Array.from(this.sb).map(t=>t.la())}get value(){return this.la()}set value(t){this.B(t)}onSetup(){Q(Te,{add:this.yj.bind(this),remove:this.zj.bind(this)})}onAttach(t){J(M)||P(t,"role","radiogroup"),this.setAttributes({value:this.la})}onDestroy(){this.sb.clear()}yj(t){this.sb.has(t)||(this.sb.add(t),t.Kc=this.Aj,t.Xb(t.la()===this.la()))}zj(t){t.Kc=null,this.sb.delete(t)}B(t,e){var r;const s=d(this.la);if(!t||t===s)return;const i=this.Uf(s),a=this.Uf(t);i==null||i.Xb(!1,e),a==null||a.Xb(!0,e),this.la.set(t),(r=this.o)==null||r.call(this,t,e)}Uf(t){for(const e of this.sb)if(t===d(e.la))return e;return null}}var qr=Object.defineProperty,Mr=Object.getOwnPropertyDescriptor,ki=(n,t,e,s)=>{for(var i=s>1?void 0:s?Mr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&qr(t,e,i),i};const ss=class ss extends g{get values(){return this.d.xj}get value(){return this.d.value}set value(t){this.d.value=t}constructor(){super(),this.d=new pt,this.d.o=this.o.bind(this)}onSetup(){l(this.D.bind(this))}D(){this.d.value=this.$props.value()}o(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}};ss.props={value:""};let Rt=ss;ki([y],Rt.prototype,"values",1);ki([y],Rt.prototype,"value",1);var jr=Object.defineProperty,Dr=Object.getOwnPropertyDescriptor,Ir=(n,t,e,s)=>{for(var i=s>1?void 0:s?Dr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&jr(t,e,i),i};const is=class is extends g{constructor(){super(),this.Na=v(!1),this.d={la:this.$props.value,Xb:this.Xb.bind(this),Kc:null},new X}get checked(){return this.Na()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Na,"aria-checked":_(this.Na)})}onAttach(t){const e=J(M);P(t,"tabindex",e?"-1":"0"),P(t,"role",e?"menuitemradio":"radio"),l(this.D.bind(this))}onConnect(t){this.Bj(),tt(t,this.v.bind(this)),x(this.ya.bind(this))}ya(){Xt(()=>{q(Te).remove(this.d)},this.connectScope)}Bj(){q(Te).add(this.d)}D(){var s,i;const{value:t}=this.$props,e=t();d(this.Na)&&((i=(s=this.d).Kc)==null||i.call(s,e))}v(t){var e,s;d(this.Na)||(this.B(!0,t),this.Cj(t),(s=(e=this.d).Kc)==null||s.call(e,d(this.$props.value),t))}Xb(t,e){d(this.Na)!==t&&this.B(t,e)}B(t,e){this.Na.set(t),this.dispatch("change",{detail:t,trigger:e})}Cj(t){this.dispatch("select",{trigger:t})}};is.props={value:""};let ke=is;Ir([y],ke.prototype,"checked",1);var Rr=Object.defineProperty,_r=Object.getOwnPropertyDescriptor,Ce=(n,t,e,s)=>{for(var i=s>1?void 0:s?_r(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Rr(t,e,i),i};const as=class as extends g{constructor(){super(),this.ka=v(0),this.z=v(null),this.J=v([]),this.d=new pt,this.d.o=this.o.bind(this)}get value(){return this.d.value}get disabled(){var t;return!((t=this.J())!=null&&t.length)}onSetup(){this.a=k(),J(M)&&(this.l=q(M));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){var e;(e=this.l)==null||e.he({ke:this.ke.bind(this)})}getOptions(){const{clipStartTime:t,clipEndTime:e}=this.a.$state,s=t(),i=e()||1/0;return this.J().map((a,r)=>({cue:a,value:r.toString(),label:a.text,startTime:Yt(Math.max(0,a.startTime-s),!1),duration:ge(Math.min(i,a.endTime)-Math.max(s,a.startTime))}))}ke(){d(()=>this.jb())}onConnect(t){l(this.D.bind(this)),l(this.jb.bind(this)),l(this.ma.bind(this)),l(this.tk.bind(this)),Bt(this.a.textTracks,"chapters",this.z.set)}tk(){const t=this.z();if(!t)return;const e=this.$i.bind(this,t);return e(),p(t,"add-cue",e),p(t,"remove-cue",e),()=>{this.J.set([])}}$i(t){const{clipStartTime:e,clipEndTime:s}=this.a.$state,i=e(),a=s()||1/0;this.J.set([...t.cues].filter(r=>r.startTime<=a&&r.endTime>=i))}D(){this.d.value=this.na()}jb(){var c;if(!((c=this.l)!=null&&c.L()))return;if(!this.z()){this.ka.set(-1);return}const{realCurrentTime:e,clipStartTime:s,clipEndTime:i}=this.a.$state,a=s(),r=i()||1/0,h=e(),o=this.J().findIndex(u=>ce(u,h));if(this.ka.set(o),o>=0){const u=this.J()[o],f=this.el.querySelector("[aria-checked='true']"),m=Math.max(a,u.startTime),b=Math.min(r,u.endTime)-m,C=Math.max(0,h-m)/b*100;f&&z(f,"--progress",I(C,3)+"%")}}ma(){var t;(t=this.l)==null||t.Ma(this.disabled)}na(){return this.ka().toString()}o(t,e){if(this.disabled||!e)return;const s=+t,i=this.J(),{clipStartTime:a}=this.a.$state;U(s)&&(i!=null&&i[s])&&(this.ka.set(s),this.a.remote.seek(i[s].startTime-a(),e),this.dispatch("change",{detail:i[s],trigger:e}))}};as.props={thumbnails:null};let $t=as;Ce([y],$t.prototype,"value",1);Ce([y],$t.prototype,"disabled",1);Ce([L],$t.prototype,"getOptions",1);var Fr=Object.defineProperty,Nr=Object.getOwnPropertyDescriptor,Oe=(n,t,e,s)=>{for(var i=s>1?void 0:s?Nr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Fr(t,e,i),i};const rs=class rs extends g{get value(){return this.d.value}get disabled(){const{audioTracks:t}=this.a.$state;return t().length===0}constructor(){super(),this.d=new pt,this.d.o=this.o.bind(this)}onSetup(){this.a=k(),J(M)&&(this.l=q(M))}onConnect(t){l(this.D.bind(this)),l(this.ma.bind(this)),l(this.Oa.bind(this))}getOptions(){const{audioTracks:t}=this.a.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}D(){this.d.value=this.na()}Oa(){var i;const{emptyLabel:t}=this.$props,{audioTrack:e}=this.a.$state,s=e();(i=this.l)==null||i.Wb.set((s==null?void 0:s.label)??t())}ma(){var t;(t=this.l)==null||t.Ma(this.disabled)}na(){const{audioTrack:t}=this.a.$state,e=t();return e?e.label.toLowerCase():""}o(t,e){if(this.disabled)return;const s=this.a.audioTracks.toArray().findIndex(i=>i.label.toLowerCase()===t);if(s>=0){const i=this.a.audioTracks[s];this.a.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:i,trigger:e})}}};rs.props={emptyLabel:"Default"};let vt=rs;Oe([y],vt.prototype,"value",1);Oe([y],vt.prototype,"disabled",1);Oe([L],vt.prototype,"getOptions",1);var Vr=Object.defineProperty,Hr=Object.getOwnPropertyDescriptor,Le=(n,t,e,s)=>{for(var i=s>1?void 0:s?Hr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Vr(t,e,i),i};const ns=class ns extends g{get value(){return this.d.value}get disabled(){const{hasCaptions:t}=this.a.$state;return!t()}constructor(){super(),this.d=new pt,this.d.o=this.o.bind(this)}onSetup(){this.a=k(),J(M)&&(this.l=q(M))}onConnect(t){var e;(e=super.onConnect)==null||e.call(this,t),l(this.D.bind(this)),l(this.ma.bind(this)),l(this.Oa.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.a.$state;return[{value:"off",label:t},...e().filter(D).map(s=>({track:s,label:s.label,value:this.xk(s)}))]}D(){this.d.value=this.na()}Oa(){var i;const{offLabel:t}=this.$props,{textTrack:e}=this.a.$state,s=e();(i=this.l)==null||i.Wb.set(s&&D(s)&&s.mode==="showing"?s.label:t())}ma(){var t;(t=this.l)==null||t.Ma(this.disabled)}na(){const{textTrack:t}=this.a.$state,e=t();return e&&D(e)&&e.mode==="showing"?this.xk(e):"off"}o(t,e){if(this.disabled)return;if(t==="off"){const i=this.a.textTracks.selected;if(i){const a=this.a.textTracks.toArray().indexOf(i);this.a.remote.changeTextTrackMode(a,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.a.textTracks.toArray().findIndex(i=>this.xk(i)===t);if(s>=0){const i=this.a.textTracks[s];this.a.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:i,trigger:e})}}xk(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}};ns.props={offLabel:"Off"};let Tt=ns;Le([y],Tt.prototype,"value",1);Le([y],Tt.prototype,"disabled",1);Le([L],Tt.prototype,"getOptions",1);var Kr=Object.defineProperty,Ur=Object.getOwnPropertyDescriptor,qe=(n,t,e,s)=>{for(var i=s>1?void 0:s?Ur(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&Kr(t,e,i),i};const hs=class hs extends g{get value(){return this.d.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.a.$state;return!e()||t().length===0}constructor(){super(),this.d=new pt,this.d.o=this.o.bind(this)}onSetup(){this.a=k(),J(M)&&(this.l=q(M))}onConnect(t){l(this.D.bind(this)),l(this.Oa.bind(this)),l(this.ma.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1?e:s+"×",value:s.toString()}))}D(){this.d.value=this.na()}Oa(){var i;const{normalLabel:t}=this.$props,{playbackRate:e}=this.a.$state,s=e();(i=this.l)==null||i.Wb.set(s===1?t():s+"×")}ma(){var t;(t=this.l)==null||t.Ma(this.disabled)}na(){const{playbackRate:t}=this.a.$state;return t().toString()}o(t,e){if(this.disabled)return;const s=+t;this.a.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}};hs.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]};let kt=hs;qe([y],kt.prototype,"value",1);qe([y],kt.prototype,"disabled",1);qe([L],kt.prototype,"getOptions",1);var zr=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,Me=(n,t,e,s)=>{for(var i=s>1?void 0:s?Qr(t,e):t,a=n.length-1,r;a>=0;a--)(r=n[a])&&(i=(s?r(t,e,i):r(i))||i);return s&&i&&zr(t,e,i),i};const os=class os extends g{constructor(){super(),this.Dj=lt(()=>{const{qualities:t}=this.a.$state;return[...t()].sort((e,s)=>s.height===e.height?s.bitrate-e.bitrate:s.height-e.height)}),this.d=new pt,this.d.o=this.o.bind(this)}get value(){return this.d.value}get disabled(){const{canSetQuality:t,qualities:e}=this.a.$state;return!t()||e().length===0}onSetup(){this.a=k(),J(M)&&(this.l=q(M))}onConnect(t){l(this.D.bind(this)),l(this.ma.bind(this)),l(this.Oa.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.Dj().map(s=>{const i=s.bitrate>=0?`${I(s.bitrate/1e6,2)} Mbps`:null;return{quality:s,label:s.height+"p",value:this.le(s),bitrate:()=>e()?null:i}})]}D(){this.d.value=this.na()}Oa(){var a;const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.a.$state,i=s()?s().height+"p":"";(a=this.l)==null||a.Wb.set(e()?t()+(i?` (${i})`:""):i)}ma(){var t;(t=this.l)==null||t.Ma(this.disabled)}o(t,e){if(this.disabled)return;if(t==="auto"){this.a.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}const{qualities:s}=this.a.$state,i=d(s).findIndex(a=>this.le(a)===t);if(i>=0){const a=d(s)[i];this.a.remote.changeQuality(i,e),this.dispatch("change",{detail:a,trigger:e})}}na(){const{quality:t,autoQuality:e}=this.a.$state;if(e())return"auto";const s=t();return s?this.le(s):"auto"}le(t){return t.height+"_"+t.bitrate}};os.props={autoLabel:"Auto",hideBitrate:!1};let wt=os;Me([y],wt.prototype,"value",1);Me([y],wt.prototype,"disabled",1);Me([L],wt.prototype,"getOptions",1);const ls=class ls extends g{constructor(){super(...arguments),this.i=null,this.Pa=0,this.Vf=-1}onSetup(){this.a=k();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){var e;this.i=(e=this.a.player.el)==null?void 0:e.querySelector("[data-media-provider]"),l(this.Ej.bind(this))}Ej(){let t=this.$props.event(),e=this.$props.disabled();!this.i||!t||e||(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),(t==="pointerup"||t==="pointerdown")&&this.a.$state.pointer()==="coarse"&&(t=t==="pointerup"?"touchend":"touchstart"),p(this.i,t,this.Fj.bind(this),{passive:!1}))}Fj(t){if(this.$props.disabled()||$s(t)&&(t.button!==0||this.a.activeMenu)||te(t)&&this.a.activeMenu||we(t)||!this.Gj(t))return;t.MEDIA_GESTURE=!0,t.preventDefault();const e=d(this.$props.event);if(!(e==null?void 0:e.startsWith("dbl")))this.Pa===0&&setTimeout(()=>{this.Pa===1&&this.Wf(t)},250);else if(this.Pa===1){queueMicrotask(()=>this.Wf(t)),clearTimeout(this.Vf),this.Pa=0;return}this.Pa===0&&(this.Vf=window.setTimeout(()=>{this.Pa=0},275)),this.Pa++}Wf(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.Hj()&&this.Ij(d(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}Gj(t){if(!this.el)return!1;if($s(t)||qi(t)||te(t)){const e=te(t)?t.changedTouches[0]??t.touches[0]:void 0,s=(e==null?void 0:e.clientX)??t.clientX,i=(e==null?void 0:e.clientY)??t.clientY,a=this.el.getBoundingClientRect(),r=i>=a.top&&i<=a.bottom&&s>=a.left&&s<=a.right;return t.type.includes("leave")?!r:r}return!0}Hj(){const t=this.a.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((e,s)=>+getComputedStyle(s).zIndex-+getComputedStyle(e).zIndex)[0]===this.el}Ij(t,e){if(!t)return;const s=new O("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[i,a]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.a.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.a.remote.seek(d(this.a.$state.currentTime)+(+a||0),e):this.a.remote[Mi(i)](e),this.dispatch("trigger",{detail:t,trigger:e})}};ls.props={disabled:!1,event:void 0,action:void 0};let ii=ls;class Wr{constructor(t){this.S=t,this.priority=10,this.z=null,this.sa=Wi()}attach(){}canRender(){return!0}detach(){this.sa.empty(),this.S.reset(),this.z=null}changeTrack(t){!t||this.z===t||(this.sa.empty(),t.readyState<2?(this.S.reset(),this.sa.add(p(t,"load",()=>this.Xf(t),{once:!0}))):this.Xf(t),this.sa.add(p(t,"add-cue",e=>{this.S.addCue(e.detail)}),p(t,"remove-cue",e=>{this.S.removeCue(e.detail)})),this.z=t)}Xf(t){this.S.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}const cs=class cs extends g{onSetup(){this.a=k(),this.setAttributes({"aria-hidden":_(this.lb.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){if(this.S){l(this.Yf.bind(this));return}K(()=>import("./prod-JgeY5li1.js").then(e=>e.d),__vite__mapDeps([0,1])).then(e=>{this.connectScope&&Xt(()=>{this.W=e;const{CaptionsRenderer:s}=this.W;this.S=new s(t),this.Qa=new Wr(this.S),l(this.Yf.bind(this))},this.connectScope)})}onDestroy(){var t;this.Qa&&(this.Qa.detach(),this.a.textRenderers.remove(this.Qa)),(t=this.S)==null||t.destroy()}lb(){const{textTrack:t,remotePlaybackState:e}=this.a.$state,s=t();return this.a.$iosControls()||e()==="connected"||!s||!D(s)}Yf(){const{viewType:t}=this.a.$state;return t()==="audio"?this.Jj():this.Kj()}Jj(){return l(this._d.bind(this)),()=>{this.el.textContent=""}}_d(){if(this.lb())return;const{textTrack:t}=this.a.$state;this.Zf(),p(t(),"cue-change",this.Zf.bind(this)),l(this.Lj.bind(this))}Zf(){this.el.textContent="";const{realCurrentTime:t,textTrack:e}=this.a.$state,s=d(t),i=d(e).activeCues,{renderVTTCueString:a}=this.W;for(const r of i){const h=document.createElement("div");h.setAttribute("data-part","cue"),h.innerHTML=a(r,s),this.el.append(h)}}Lj(){const{realCurrentTime:t}=this.a.$state,{updateTimedVTTCueNodes:e}=this.W;e(this.el,t())}Kj(){return l(this.Mj.bind(this)),l(this.Nj.bind(this)),this.a.textRenderers.add(this.Qa),()=>{this.el.textContent="",this.Qa.detach(),this.a.textRenderers.remove(this.Qa)}}Mj(){this.S.dir=this.$props.textDir()}Nj(){if(this.lb())return;const{realCurrentTime:t}=this.a.$state;this.S.currentTime=t()}};cs.props={textDir:"ltr"};let ai=cs;const Qt=class Qt extends g{onSetup(){this.a=k(),this.fd(),this.$k(),this.Hh(),this.ob()}onAttach(t){t.style.setProperty("pointer-events","none"),l(this.Ud.bind(this)),l(this.fd.bind(this)),l(this.$k.bind(this)),l(this.Hh.bind(this)),l(this.ob.bind(this));const{started:e}=this.a.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.Rb.bind(this),"data-error":this.wa.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){l(this.Pk.bind(this)),l(this.Ea.bind(this))}wa(){const{error:t}=this.$state;return!rt(t())}Pk(){const{canLoadPoster:t,poster:e}=this.a.$state;!t()&&e()&&Pt(e(),"preconnect")}ob(){const{src:t}=this.$props,{$iosControls:e}=this.a,{poster:s}=this.a.$state;this.el&&T(this.el,"display",e()?"none":null),this.$state.hidden.set(this.wa()||!(t()||s())||e())}Rb(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}Ud(){const t=this.$state.img();t&&(p(t,"load",this.lc.bind(this)),p(t,"error",this.U.bind(this)))}fd(){const{canLoadPoster:t,poster:e}=this.a.$state,s=this.$props.src(),i=s||e();s&&e()!==s&&this.a.$state.providedPoster.set(s),this.$state.src.set(t()&&i.length?i:null)}$k(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:s}=this.a.$state;e.set(t()||s()?this.$props.alt():null)}Hh(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s,poster:i}=this.a.$state,a=t()!==null?t():s();e.set(/ytimg\.com|vimeo/.test(i()||"")?null:a===!0?"anonymous":a)}Ea(){const{loading:t,error:e}=this.$state,{canLoadPoster:s,poster:i}=this.a.$state;t.set(s()&&!!i()),e.set(null)}lc(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}U(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}};Qt.props={src:null,alt:null,crossOrigin:null},Qt.state=new nt({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});let ri=Qt;const Wt=class Wt extends g{constructor(){super(...arguments),this.cn=v(null)}onSetup(){this.a=k(),this.ag();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.fn.bind(this)})}onAttach(t){t.hasAttribute("role")||l(this.hn.bind(this)),l(this.ag.bind(this))}onConnect(t){l(()=>{if(!this.$props.toggle()){this.cn.set(null);return}tt(t,this.gn.bind(this))})}ag(){const{type:t,padHours:e,padMinutes:s,showHours:i}=this.$props,a=this.Oj(t()),r=this.a.$state.duration(),h=this.fn();if(!Number.isFinite(a+r)){this.$state.timeText.set("LIVE");return}const o=h?Math.max(0,r-a):a,c=Yt(o,e(),s(),i());this.$state.timeText.set((h?"-":"")+c)}hn(){if(!this.el)return;const{toggle:t}=this.$props;T(this.el,"role",t()?"timer":null),T(this.el,"tabindex",t()?0:null)}Oj(t){const{bufferedEnd:e,duration:s,currentTime:i}=this.a.$state;switch(t){case"buffered":return e();case"duration":return s();default:return i()}}fn(){return this.$props.remainder()&&this.cn()!==!1}gn(t){if(t.preventDefault(),this.cn()===null){this.cn.set(!this.$props.remainder());return}this.cn.set(e=>!e)}};Wt.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1},Wt.state=new nt({timeText:""});let ni=Wt;export{Ns as A,Rt as B,Ks as C,be as D,ct as E,Us as F,ii as G,ya as H,E as I,ue as J,$ as K,Js as L,fe as M,Pt as N,ot as O,ri as P,wt as Q,ke as R,Ws as S,Ys as T,se as U,Zs as V,Yr as W,ee as X,Br as Y,Zr as a,ve as b,ni as c,zs as d,Qs as e,Hs as f,vt as g,Tt as h,at as i,si as j,kt as k,ye as l,$e as m,Gs as n,yt as o,X as p,ai as q,Rs as r,Vs as s,Ot as t,me as u,_s as v,Gr as w,Fs as x,ei as y,$t as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/prod-JgeY5li1.js","assets/app-JabzxadU.js","assets/vidstack-audio-6-S3G7ri.js","assets/vidstack-html-gJo_jEUT.js","assets/vidstack-iVChOPoI-jn5iU3Z9.js","assets/vidstack-XrFM82kz-chqeYwh9.js","assets/vidstack-video-KYb_c11i.js","assets/vidstack-hls-x-miYTGI.js","assets/vidstack-vimeo-AzAg8N-i.js","assets/vidstack-bl1DSYzm-Ib7cIohC.js","assets/vidstack-TotHz45K-JC8JAQ5K.js","assets/vidstack-youtube-hnN5Jujz.js","assets/vidstack-eR7fRUWh-_wDIXJ0I.js","assets/vidstack-H1mKklxM-82I673ck.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
